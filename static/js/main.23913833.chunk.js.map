{"version":3,"sources":["lib/threejs/DataPoint.js","lib/ActionUtilities.js","lib/threejs/ProgressBar.js","lib/threejs/FluxArrow.js","lib/threejs/SceneManager.js","components/ThreeContainer.js","lib/threejs/threeEntryPoint.js","lib/FileUtilities.js","components/FileInput.js","lib/threejs/PlotData.js","lib/LocalStorage.js","components/Navigation.js","components/SavedPlot.js","components/StorageList.js","lib/threejs/DataContext.js","App.js","registerServiceWorker.js","index.js"],"names":["DataPoint","previousState","arguments","length","undefined","Object","classCallCheck","this","tinycolor","require","isState","baseColor","radius","shadowMargin","shadowPushBack","textPullForward","shadow","geometry","THREE","mesh","material","color","object","position","set","scale","withinCircle","x","y","pos","Math","sqrt","adjustScale","newRadius","newScale","appendText","font","text","xpos","ypos","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelSegments","textMesh","moveText","rotation","PI","changeTextSize","newX","newY","box","setFromObject","max","min","setPosition","z","transformColor","colorObject","r","g","b","toHexString","changeColor","toString","lightenColor","percent","lighten","darkenColor","darken","update","ActionUtilities","ms","Promise","resolve","setTimeout","ProgressBar","scene","fontResource","buttonPosInfo","stepLength","bar","progress","start","stop","progressLength","startPos","add","updateProgress","step","timeInfo","remove","withinBar","withinStart","withinHeight","withinWidth","withinStop","stopPos","getStep","clickedPos","round","addStart","depthTest","textStartMesh","addStop","textStopMesh","setSteps","numOfSteps","getBar","FluxArrow","arrowInfo","arrowLength","dataPointRadius","arrowWidth","calculateLength","distance","point2","point1","calculateDir","calculatePos","adjust","dir","shiftAmount","shift","normalize","newColor","updatePos","to","from","setLength","setDirection","len","delete","SceneManager","canvas","IController","data","actionUtil","origin","screenDimensions","width","paused","stepInc","stepDelay","valueMax","fluxMax","skipSteps","progressBar","editMode","halfQuantity","halfFlux","mouseDown","dataPointToMove","dataPointToDelete","arrowMode","arrowPoints","controls","changeStep","_startStepping","apply","startStepping","addPoint","labelText","labels","labelMode","dataPoints","window","prompt","alert","dataPoint","push","addDataPoint","addArrow","deletePoint","splice","updateArrows","deleteDataPoint","load","fontLoadingComplete","addEventListener","evt","checkWithinRange","arrows","i","pointIndex1","pointIndex2","arrow","mousePos","getMousePos","newMousePos","canvasToThreePos","background","buildScene","renderer","_ref","antialias","alpha","DPR","devicePixelRatio","setPixelRatio","setSize","gammaInput","gammaOutput","buildRender","camera","_ref2","lookAt","buildCamera","datGui","gui","dat","autoPlace","document","getElementById","appendChild","domElement","id","name","onChange","newValue","changeAllRadius","addColor","editFolder","addFolder","buildGUI","reloadScene","traverse","child","clearScene","hydratedPoints","forEach","oldPoint","point","savedData","geometries","restoreDataPoint","reloadDataPoints","hydratedArrows","oldArrow","restoreArrow","reloadArrows","buildProgressBar","updateDisplay","selected","animationData","isDataLoaded","clickedStep","applyStep","stepForward","rect","getBoundingClientRect","clientX","left","clientY","top","dataLoaded","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","_stepForward","_callee2","_context2","hasNextStep","sleep","changePercent","diff","fluxData","colorPoints","deletedDataPoint","index1","index2","resetDataAnimation","onFluxLoad","onLoad","registerCallback","render","ThreeContainer","props","_this","possibleConstructorReturn","getPrototypeOf","call","dataContext","container","createElement","scrollWidth","scrollHeight","createCanvas","sceneManager","requestAnimationFrame","threeEntryPoint","threeRootElement","_this2","react_default","title","style","borderStyle","borderWidth","borderColor","ref","element","Component","FileUtilities","xlsxFile","onComplete","reader","FileReader","readAsBinaryString","onload","csvSheetStrings","transformXLXSIntoCsvStrings","result","parseSingleCSV","file","readAsText","JSON","parse","binaryContents","XLSX","csvStrings","workbook","read","type","SheetNames","utils","sheet_to_csv","Sheets","csvString","ch","numOfRows","numOfColumns","charAt","Array","rows","split","FileInput","processUpload","bind","assertThisInitialized","state","callback","onDone","accept","plot","isPlot","files","e","readPlots","target","readXLSX","fileUtil","processPlotsData","dataString","hasNoFiles","processXLSXIntoCSV","FormGroup_default","ControlLabel_default","htmlFor","cursor","FormControl_default","input","fileInput","display","NavItem","PlotData","LocalStorage","modelName","model","newModelTemplate","loadModelsFromDefaultContainer","models","saveToStore","catch","key","value","failureMsg","localforage","setItem","stringify","String","t0","getItem","substring","_context3","addition","modelId","hasOwnProperty","versions","newModelVersion","reducedList","fetchFromStore","dataArray","Navigation","uploadPoints","uploadDataPoints","uploadFlux","uploadFluxData","reset","toast","POSITION","TOP_LEFT","localStorage","blobData","Blob","textFile","URL","createObjectURL","downloadAnchorNode","setAttribute","body","click","preventDefault","injectDataPointList","injectFluxList","confirm","writeToLocalStorage","location","reload","preventRedirect","nav","margin","Navbar_default","inverse","Header","Brand","href","Form_default","inline","FileInput_FileInput","onClick","Button_default","lib","autoClose","downloadLocalStorage","uploadModels","SavedPlot","param","dataCapsule","className","StorageList","parent","entries","handleClick","addToLocal","removeFromLocal","loadSaves","createButtonEntry","createEntryName","createGrid","capsule","currentPlot","isActive","save","applyName","SavedPlot_SavedPlot","resp","solictStorageName","addNewModelToLocal","forceUpdate","removeFromStorage","extension","s","updateStorage","success","loadFromStorage","ThreeController","setState","_this3","DataContext","context","plot_id","callbacks","assign","callObservers","loadPlot","json","xlsxData","instance","App","fetchSaves","saves","console","log","currentContext","styleFill","Grid_default","fluid","Row_default","components_Navigation","Col_default","sm","md","padding","ThreeContainer_ThreeContainer","backgroundColor","StorageList_StorageList","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","error","ReactDOM","src_App","process","concat","fetch","response","status","headers","get","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.23913833.chunk.js","sourcesContent":["/* Imported From: https://itnext.io/how-to-use-plain-three-js-in-your-react-apps-417a79d926e0 */\r\nimport * as THREE from 'three'\r\n\r\nclass DataPoint {\r\n\r\n    constructor(previousState = null) {\r\n        var tinycolor = require('tinycolor2');\r\n        const origRadius = 40;\r\n\r\n        let isState = !!previousState;\r\n\r\n        this.baseColor = isState ? previousState.baseColor : \"#aa00ff\";\r\n        this.radius = origRadius;\r\n        this.shadowMargin = 7;\r\n        this.shadowMargin = isState ? previousState.shadowMargin : 7;\r\n        this.shadowPushBack = 1;\r\n        this.textPullForward = -5;\r\n\r\n        this.shadow = {};\r\n        this.shadow.geometry = new THREE.CircleGeometry(this.radius + this.shadowMargin, 32);\r\n        this.shadow.mesh = new THREE.Mesh(this.shadow.geometry);\r\n        this.shadow.mesh.material =\r\n            new THREE.MeshBasicMaterial({\r\n                color: \"#cccccc\"\r\n            });\r\n\r\n        this.object = {};\r\n        this.object.geometry = new THREE.CircleGeometry(this.radius, 32);\r\n        this.object.mesh = new THREE.Mesh(this.object.geometry);\r\n        this.object.mesh.material =\r\n            new THREE.MeshBasicMaterial({\r\n                color: this.baseColor\r\n            });\r\n\r\n        this.object.mesh.position.set(0, 0, 0);\r\n        this.shadow.mesh.position.set(0, 0, this.shadowPushBack);\r\n\r\n        this.position = this.object.mesh.position;\r\n        this.shadow.position = this.shadow.mesh.position;\r\n\r\n        this.object.scale = this.object.mesh.scale;\r\n        this.shadow.scale = this.shadow.mesh.scale;\r\n\r\n        this.withinCircle = function (x, y) {\r\n            let pos = this.object.mesh.position;\r\n            let distance = Math.sqrt((x - pos.x) * (x - pos.x) + (y - pos.y) * (y - pos.y));\r\n            return !(distance > this.radius);\r\n        };\r\n\r\n        this.adjustScale = function (newRadius) {\r\n            this.radius = newRadius;\r\n            let newScale = this.radius / origRadius;\r\n            this.object.scale.set(newScale, newScale, newScale);\r\n            this.shadow.scale.set(newScale, newScale, newScale);\r\n        };\r\n\r\n        this.appendText = function (font, text, xpos, ypos) {\r\n            var geometry = new THREE.TextGeometry(text, {\r\n                font: font,\r\n                size: 13,\r\n                height: 5,\r\n                curveSegments: 12,\r\n                bevelEnabled: false,\r\n                bevelThickness: 1,\r\n                bevelSize: 2,\r\n                bevelSegments: 5\r\n            });\r\n            let material = new THREE.MeshBasicMaterial({\r\n                color: 0x000000\r\n            });\r\n            this.textMesh = new THREE.Mesh(geometry, material);\r\n            this.moveText(xpos, ypos);\r\n            this.textMesh.rotation.set(0, 0, Math.PI);\r\n            this.changeTextSize(this.radius);\r\n        };\r\n\r\n        this.moveText = function (newX, newY) {\r\n            var box = new THREE.Box3().setFromObject(this.textMesh); // To center text horizontally\r\n            this.textMesh.position.set(newX + .5 * (box.max.x - box.min.x), newY, this.textPullForward);\r\n        }\r\n\r\n        this.setPosition = function (x, y, z) {\r\n            this.position.set(x, y, z);\r\n            this.shadow.position.set(x, y, this.shadowPushBack);\r\n        }\r\n\r\n        this.changeTextSize = function (newScale) {\r\n            let scale = newScale / origRadius;\r\n            this.textMesh.scale.set(scale, scale, scale + this.textPullForward);\r\n        }\r\n\r\n        this.transformColor = function (colorObject) {\r\n            return tinycolor({\r\n                r: colorObject[0],\r\n                g: colorObject[1],\r\n                b: colorObject[2]\r\n            }).toHexString();\r\n        }\r\n\r\n        this.changeColor = function (colorObject) {\r\n            this.baseColor = this.transformColor(colorObject);\r\n            this.object.mesh.material.color.set(this.baseColor.toString());\r\n        };\r\n\r\n        this.lightenColor = function (percent) {\r\n            this.object.mesh.material.color.set(tinycolor(this.baseColor).lighten(percent).toString());\r\n        };\r\n\r\n        this.darkenColor = function (percent) {\r\n            this.object.mesh.material.color.set(tinycolor(this.baseColor).darken(percent).toString());\r\n        };\r\n\r\n        if (isState) {\r\n            this.adjustScale(previousState.radius);\r\n            this.object.mesh.position.set(previousState.position.x, previousState.position.y, previousState.position.z);\r\n            this.shadow.mesh.position.set(previousState.shadow.position.x, previousState.shadow.position.y, previousState.shadow.position.z);\r\n        }\r\n\r\n        this.update = function () {\r\n\r\n        };\r\n    };\r\n}\r\n\r\nexport default DataPoint;","export default class ActionUtilities  {\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n      }\r\n\r\n      \r\n}","import * as THREE from 'three'\r\n\r\nclass ProgressBar {\r\n\r\n    constructor(scene, fontResource, buttonPosInfo) {\r\n        const barLength = 500;\r\n        this.stepLength = 0;\r\n        this.buttonPosInfo = buttonPosInfo\r\n        \r\n        this.bar = {};\r\n        this.progress = {};\r\n        this.start = {};\r\n        this.stop = {};\r\n\r\n        this.bar.geometry = new THREE.BoxGeometry( barLength, 20, 1 );\r\n        this.bar.mesh = new THREE.Mesh(this.bar.geometry);\r\n        this.bar.mesh.material = new THREE.MeshBasicMaterial( {color: \"#afafaf\"} );\r\n\r\n        this.progressLength = 0;\r\n        this.progress.geometry = new THREE.BoxGeometry( this.progressLength, 20, 1 );\r\n        this.progress.mesh = new THREE.Mesh( this.progress.geometry);\r\n        this.progress.mesh.material = new THREE.MeshBasicMaterial( {color: \"#666666\"} );\r\n\r\n        this.bar.mesh.position.set(0, this.buttonPosInfo.startPos.y + 25, 0);//TODO: Make this dynamic to bottom of screen + padding\r\n        this.progress.mesh.position.set((barLength-this.progressLength)/2, this.buttonPosInfo.startPos.y + 25, 0);//TODO: Make height to bottom of screen + padding\r\n        scene.add(this.bar.mesh);\r\n        scene.add(this.progress.mesh);\r\n\r\n        this.updateProgress = function(step, timeInfo){\r\n            if (this.stepLength * step <= barLength){\r\n                this.progressLength = this.stepLength * step;\r\n                this.progress.mesh.geometry = new THREE.BoxGeometry( this.progressLength, 20, 1 );\r\n                this.progress.mesh.position.set((barLength-this.progressLength)/2, this.buttonPosInfo.startPos.y + 25, 0);//TODO: Make height to bottom of screen + padding\r\n                this.appendText(timeInfo)\r\n            }\r\n        }\r\n\r\n        this.appendText = function (text) {\r\n            if(this.textMesh != null){\r\n                scene.remove(this.textMesh)\r\n            }\r\n            var geometry = new THREE.TextGeometry(text, {\r\n                font: fontResource,\r\n                size: 10,\r\n                height: 5,\r\n                curveSegments: 12,\r\n                bevelEnabled: false,\r\n                bevelThickness: 1,\r\n                bevelSize: 2,\r\n                bevelSegments: 5\r\n            });\r\n            let material = new THREE.MeshBasicMaterial({ color: 0x000000 });\r\n            this.textMesh = new THREE.Mesh(geometry, material);\r\n            this.textMesh.position.set(250 - this.progressLength, this.buttonPosInfo.startPos.y + 50, 0);\r\n            this.textMesh.rotation.set(0, 0, Math.PI);\r\n            scene.add(this.textMesh);\r\n        };\r\n\r\n        this.moveText = function(newX, newY){\r\n            var box = new THREE.Box3().setFromObject( this.textMesh );//To center text horizontally\r\n            this.textMesh.position.set(newX + .5*(box.max.x - box.min.x), newY, 0);\r\n        }\r\n\r\n        this.withinBar = function (x, y) {\r\n            var withinHeight = (y > this.buttonPosInfo.startPos.y + 10) && (y < this.buttonPosInfo.startPos.y + 35)\r\n            var withinWidth = (x < 250) && ( x > -250)\r\n            return withinHeight && withinWidth\r\n        };\r\n\r\n        this.withinStart = function (x, y) {\r\n            var withinHeight = (y > this.buttonPosInfo.startPos.y - 15) && (y < this.buttonPosInfo.startPos.y + 15)\r\n            var withinWidth = (x < this.buttonPosInfo.startPos.x + 25) && ( x > this.buttonPosInfo.startPos.x - 25)\r\n            return withinHeight && withinWidth\r\n        };\r\n\r\n        this.withinStop = function (x, y) {\r\n            var withinHeight = (y > this.buttonPosInfo.stopPos.y - 15) && (y < this.buttonPosInfo.stopPos.y + 15)\r\n            var withinWidth = (x < this.buttonPosInfo.stopPos.x + 25) && ( x > this.buttonPosInfo.stopPos.x - 25)\r\n            return withinHeight && withinWidth\r\n        };\r\n\r\n        this.getStep = function (x) {\r\n            var clickedPos = 250 - x;\r\n            var step = Math.round(clickedPos/this.stepLength);\r\n            return step;\r\n        };\r\n\r\n        this.addStart = function (){\r\n            this.start.geometry = new THREE.BoxGeometry( 50, 30, 1 );\r\n            this.start.mesh = new THREE.Mesh(this.start.geometry);\r\n            this.start.mesh.material = new THREE.MeshBasicMaterial( {color: \"#00ff00\"} );\r\n            //this.start.mesh.position.set(345, 130, 0);\r\n            this.start.mesh.position.set(this.buttonPosInfo.startPos.x, this.buttonPosInfo.startPos.y, 0);\r\n            scene.add(this.start.mesh);\r\n\r\n            var geometry = new THREE.TextGeometry(\"Start\", {\r\n                font: fontResource,\r\n                size: 10,\r\n                height: 5,\r\n                curveSegments: 12,\r\n                bevelEnabled: false,\r\n                bevelThickness: 1,\r\n                bevelSize: 2,\r\n                bevelSegments: 5\r\n            });\r\n            let material = new THREE.MeshBasicMaterial({ color: 0x000000 });\r\n            material.depthTest = false;\r\n            let textStartMesh = new THREE.Mesh(geometry, material);\r\n            textStartMesh.position.set(this.buttonPosInfo.startPos.x + (50/4), this.buttonPosInfo.startPos.y + (30/4), 0);\r\n            textStartMesh.rotation.set(0, 0, Math.PI);\r\n            scene.add(textStartMesh);\r\n        }\r\n\r\n        this.addStop = function (){\r\n            this.stop.geometry = new THREE.BoxGeometry( 50, 30, 1 );\r\n            this.stop.mesh = new THREE.Mesh(this.stop.geometry);\r\n            this.stop.mesh.material = new THREE.MeshBasicMaterial( {color: \"#ff0000\"} );\r\n            //this.stop.mesh.position.set(345, 175, 1);\r\n            this.stop.mesh.position.set(this.buttonPosInfo.stopPos.x, this.buttonPosInfo.stopPos.y, 0);\r\n            scene.add(this.stop.mesh);\r\n\r\n            var geometry = new THREE.TextGeometry(\"Stop\", {\r\n                font: fontResource,\r\n                size: 10,\r\n                height: 5,\r\n                curveSegments: 12,\r\n                bevelEnabled: false,\r\n                bevelThickness: 1,\r\n                bevelSize: 2,\r\n                bevelSegments: 5\r\n            });\r\n            let material = new THREE.MeshBasicMaterial({ color: 0x000000 });\r\n            material.depthTest = false;\r\n            let textStopMesh = new THREE.Mesh(geometry, material);\r\n            textStopMesh.position.set(this.buttonPosInfo.stopPos.x + (50/4), this.buttonPosInfo.stopPos.y + (30/4), 0);\r\n            textStopMesh.rotation.set(0, 0, Math.PI);\r\n            scene.add(textStopMesh);\r\n        }\r\n\r\n       this.setSteps = function (numOfSteps){\r\n            this.stepLength = barLength/numOfSteps;\r\n        }\r\n\r\n        this.getBar = function (){\r\n            return this.progress.mesh\r\n        }\r\n    };\r\n}\r\n\r\nexport default ProgressBar; ","import * as THREE from 'three'\r\n\r\nclass FluxArrow {\r\n    constructor(arrowInfo) {\r\n        var tinycolor = require('tinycolor2');\r\n        this.arrowInfo = arrowInfo;\r\n        var arrowLength = 22 * (arrowInfo.dataPointRadius/40);\r\n        var arrowWidth = 15 * (arrowInfo.dataPointRadius/40); //Keep relative proportions liked with data points of radius 40 \r\n\r\n        this.calculateLength = function () {\r\n            //Length from center to center\r\n            let distance = Math.sqrt((this.arrowInfo.point2.x - this.arrowInfo.point1.x) * (this.arrowInfo.point2.x - this.arrowInfo.point1.x) +\r\n                (this.arrowInfo.point2.y - this.arrowInfo.point1.y) * (this.arrowInfo.point2.y - this.arrowInfo.point1.y));\r\n            //Moves each end to edge of circle plus 1/4 of radius more\r\n            distance = distance - 2.5 * (this.arrowInfo.dataPointRadius)\r\n            return distance;\r\n        };\r\n        this.calculateDir = function () {\r\n           return new THREE.Vector3(this.arrowInfo.point2.x - this.arrowInfo.point1.x, this.arrowInfo.point2.y - this.arrowInfo.point1.y, 0);\r\n        }\r\n        this.calculatePos = function () {\r\n            var adjust = new THREE.Vector3(1.25 * arrowInfo.dataPointRadius * this.dir.x, 1.25 * arrowInfo.dataPointRadius * this.dir.y, 0) //1.25 * 40 = To edge + 1/4 of circle radius\r\n            var shiftAmount = arrowInfo.dataPointRadius/3.5;\r\n            if (arrowInfo.shift){\r\n                var diff = (this.dir.x - this.dir.y)\r\n                if (diff >= 0){\r\n                    if (this.dir.y <= -.5) {\r\n                        adjust.x += shiftAmount;\r\n                    }else{\r\n                        adjust.y += shiftAmount;\r\n                    }\r\n                } else {\r\n                    if (this.dir.y >= .5) {\r\n                        adjust.x += shiftAmount;\r\n                    }else{\r\n                        adjust.y += shiftAmount;\r\n                    }\r\n                }\r\n            }\r\n            return new THREE.Vector3(this.arrowInfo.point1.x + adjust.x, this.arrowInfo.point1.y + adjust.y, 0)\r\n        }\r\n\r\n        this.baseColor = \"#222222\"\r\n        this.object = {};\r\n        this.dir = this.calculateDir();\r\n        this.dir.normalize();\r\n        this.length = this.calculateLength();\r\n        this.position = this.calculatePos();\r\n\r\n        this.object = new THREE.ArrowHelper(this.dir, this.position, this.length, this.baseColor, arrowLength, arrowWidth);\r\n\r\n        this.lightenColor = function (percent) {\r\n            var newColor = tinycolor(this.baseColor).lighten(percent).toString();\r\n            this.object = new THREE.ArrowHelper(this.dir, this.position, this.length, newColor, arrowLength, arrowWidth);\r\n        };\r\n\r\n        this.darkenColor = function (percent) {\r\n            var newColor = tinycolor(this.baseColor).darken(percent).toString();\r\n            this.object = new THREE.ArrowHelper(this.dir, this.position, this.length, newColor, arrowLength, arrowWidth);\r\n        };\r\n\r\n        this.updatePos = function (to, from) {\r\n            this.arrowInfo.point1 = to;\r\n            this.arrowInfo.point2 = from;\r\n\r\n            this.dir = this.calculateDir();\r\n            this.dir.normalize();\r\n            this.length = this.calculateLength();\r\n            this.position = this.calculatePos();\r\n\r\n            this.object.setLength(this.length, arrowLength, arrowWidth);\r\n            this.object.setDirection(this.dir);\r\n            this.object.position.set(this.position.x, this.position.y, 0);\r\n        };\r\n\r\n        this.setLength = function (len) {\r\n            this.object.setLength(len);\r\n        };\r\n\r\n        this.delete = function () {\r\n            this.scene.remove(this.object);\r\n        };\r\n\r\n        this.adjustScale = function (newRadius) {\r\n            arrowInfo.dataPointRadius = newRadius\r\n            arrowLength = 22 * (arrowInfo.dataPointRadius/40);\r\n            arrowWidth = 15 * (arrowInfo.dataPointRadius/40);\r\n            this.updatePos(this.arrowInfo.point1, this.arrowInfo.point2);\r\n        };\r\n    };\r\n}\r\n\r\nexport default FluxArrow","/* Imported From: https://itnext.io/how-to-use-plain-three-js-in-your-react-apps-417a79d926e0 */\r\nimport * as THREE from 'three';\r\nimport DataPoint from './DataPoint';\r\nimport * as dat from 'dat.gui';\r\nimport ActionUtilities from '../ActionUtilities';\r\nimport ProgressBar from './ProgressBar';\r\nimport FluxArrow from './FluxArrow';\r\n\r\nexport default (canvas, IController, data) => {\r\n\r\n    const actionUtil = new ActionUtilities();\r\n\r\n    const origin = new THREE.Vector3(0, 0, 0);\r\n    const screenDimensions = {\r\n        width: canvas.width,\r\n        height: canvas.height\r\n    }\r\n    const origRadius = 40;\r\n\r\n    var paused = true;\r\n    var stepInc = 1;\r\n    data.color = data.color || [70, 156, 150, 1];\r\n    data.stepDelay = data.stepDelay || 300;\r\n    data.valueMax = data.valueMax || 1;\r\n    data.fluxMax = data.fluxMax || 1;\r\n    data.skipSteps = data.skipSteps || 1;\r\n    var halfQuantity = data.valueMax / 2.0;\r\n    var halfFlux = data.fluxMax / 2.0;\r\n    var baseColor = [170, 0, 255, 1];\r\n    var radius = origRadius;\r\n\r\n    var mouseDown = false;\r\n    var dataPointToMove = -1;\r\n    var dataPointToDelete = -1;\r\n\r\n    var progressBar;\r\n    var editMode;\r\n    var arrowMode = 0; //0 = Off, 1 = Waiting for 1st point, 2 = Waiting for 2nd point\r\n    var arrowPoints = [] //After `Add Arrow`, [0] holds FROM data point's index, [1] holds TO data point's index\r\n\r\n    var fontResource;\r\n\r\n    const controls = {\r\n        size: origRadius,\r\n        valueMax: data.valueMax,\r\n        fluxMax: data.fluxMax,\r\n        stepDelay: data.stepDelay,\r\n        color: data.color,\r\n        skipSteps: data.skipSteps,\r\n        changeStep: function () {\r\n            startStepping();\r\n        },\r\n        addPoint: function () {\r\n            if (editMode) {\r\n                addDataPoint();\r\n            }\r\n        },\r\n        addArrow: function () {\r\n            if (editMode) {\r\n                arrowMode = 1;\r\n            }\r\n        },\r\n        deletePoint: function () {\r\n            if (editMode) {\r\n                deleteDataPoint();\r\n            }\r\n        },\r\n        editMode: false,\r\n        labelMode: false\r\n    }\r\n\r\n    loadFont();\r\n    const scene = buildScene();\r\n    const renderer = buildRender(screenDimensions);\r\n    const camera = buildCamera(screenDimensions);\r\n    var datGui = buildGUI();\r\n\r\n    IController.resetDataAnimation = function () {\r\n        if (data.animationData) {\r\n            data.step = 0;\r\n            paused = true;\r\n            progressBar.updateProgress(0, data.animationData[0][0]);\r\n            applyStep();\r\n        }\r\n    };\r\n\r\n    data.onFluxLoad = () => {}\r\n    data.onLoad = () => {\r\n        if (data.animationData != null) {\r\n            progressBar.appendText(data.animationData[0][0]);\r\n            progressBar.setSteps(data.animationData.length);\r\n        }\r\n    }\r\n    data.registerCallback(reloadScene);\r\n\r\n    function loadFont() {\r\n        var loader = new THREE.FontLoader();\r\n        loader.load(\r\n            'https://threejs.org//examples/fonts/helvetiker_regular.typeface.json',\r\n            fontLoadingComplete\r\n        );\r\n    }\r\n\r\n    function fontLoadingComplete(font) {\r\n        fontResource = font;\r\n        reloadScene();\r\n    }\r\n\r\n    function reloadScene() {\r\n        clearScene();\r\n        reloadDataPoints();\r\n        reloadArrows();\r\n        buildProgressBar();\r\n        updatePanel();\r\n    }\r\n\r\n    function updatePanel() {\r\n        data.skipSteps = data.skipSteps || 1;\r\n        data.stepDelay = data.stepDelay || 300;\r\n        data.valueMax = data.valueMax || 1;\r\n        data.fluxMax = data.fluxMax || 1;\r\n        data.color = data.color || [70, 156, 150, 1];\r\n        halfQuantity = data.valueMax / 2.0;\r\n        halfFlux = data.fluxMax / 2.0;\r\n        controls.skipSteps = data.skipSteps;\r\n        controls.valueMax = data.valueMax;\r\n        controls.fluxMax = data.fluxMax;\r\n        controls.stepDelay = data.stepDelay;\r\n        controls.color = data.color;\r\n        datGui.updateDisplay();\r\n    }\r\n\r\n    function clearScene() {\r\n        let remove = [];\r\n        scene.traverse((child) => {\r\n            if (child instanceof THREE.Mesh || child instanceof THREE.ArrowHelper) {\r\n                remove.push(child);\r\n            }\r\n        });\r\n        for (let i = 0; i < remove.length; i++) {\r\n            scene.remove(remove[i]);\r\n        }\r\n    }\r\n\r\n    function reloadArrows() {\r\n        let hydratedArrows = [];\r\n        data.arrows.forEach(oldArrow => {\r\n            hydratedArrows.push(restoreArrow(oldArrow));\r\n        });\r\n        data.arrows = hydratedArrows;\r\n    }\r\n\r\n    function reloadDataPoints() {\r\n        let hydratedPoints = [];\r\n        data.dataPoints.forEach(oldPoint => {\r\n            let point = restoreDataPoint(oldPoint);\r\n            hydratedPoints.push(point);\r\n            point.moveText(point.object.mesh.position.x, point.object.mesh.position.y);\r\n        });\r\n        data.dataPoints = hydratedPoints;\r\n    }\r\n\r\n    function buildGUI() {\r\n        var gui = new dat.GUI({\r\n            autoPlace: false\r\n        });\r\n        var customContainer = document.getElementById('datGuiAnchor');\r\n        customContainer.appendChild(gui.domElement);\r\n        gui.domElement.id = 'datGuiAnchor';\r\n\r\n        gui.add(controls, 'changeStep').name(\"Step Forward\");\r\n        var sizeController = gui.add(controls, 'size').name(\"Size\").min(10).max(100).step(1);\r\n        sizeController.onChange(function (newValue) {\r\n            radius = newValue; //Ratio of original size\r\n            changeAllRadius();\r\n        });\r\n        var timeController = gui.add(controls, 'stepDelay').name(\"Delay (in ms)\").min(0).max(500).step(10)\r\n        timeController.onChange(function (newValue) {\r\n            data.stepDelay = newValue;\r\n        })\r\n        var maxController = gui.add(controls, 'valueMax').name(\"Max Value\");\r\n        maxController.onChange(function (newValue) {\r\n            data.valueMax = newValue;\r\n            halfQuantity = data.valueMax / 2.0;\r\n        });\r\n        var maxFluxController = gui.add(controls, 'fluxMax').name(\"Max Flux\");\r\n        maxFluxController.onChange(function (newValue) {\r\n            data.fluxMax = newValue;\r\n            halfFlux = data.fluxMax / 2.0;\r\n        });\r\n        var colorController = gui.addColor(controls, 'color');\r\n        colorController.onChange(function (newValue) {\r\n            baseColor = newValue;\r\n            changeColor(baseColor);\r\n        })\r\n\r\n        var editFolder = gui.addFolder(\"Edit\");\r\n        editFolder.add(controls, 'editMode').name(\"Edit Mode\").onChange(function (newValue) {\r\n            editMode = newValue;\r\n        });\r\n        editFolder.add(controls, 'labelMode').name(\"Import Labels\").onChange(function (newValue) {\r\n            data.labelMode = newValue;\r\n        });\r\n        editFolder.add(controls, 'addPoint').name(\"Add Data Point\");\r\n        editFolder.add(controls, 'addArrow').name(\"Add Arrow\");\r\n        editFolder.add(controls, 'deletePoint').name(\"Delete Data Point\");\r\n\r\n        var incFolder = gui.addFolder(\"Adjust Increment\")\r\n        incFolder.add(controls, 'skipSteps').name(\"Skip Steps\").onChange(function (newValue) {\r\n            data.skipSteps = newValue;\r\n        });\r\n        return gui;\r\n    }\r\n\r\n    function buildProgressBar() {\r\n        //Calculate positions for start/stop buttons\r\n        var startPos = {\r\n            x: (canvas.width / 5),\r\n            y: (canvas.height / 4) * 2.75,\r\n        }\r\n        startPos = canvasToThreePos(startPos);\r\n        var stopPos = {\r\n            x: startPos.x,\r\n            y: startPos.y + 50,\r\n        }\r\n        var buttonInfo = {\r\n            startPos: startPos,\r\n            stopPos: stopPos,\r\n        }\r\n        progressBar = new ProgressBar(scene, fontResource, buttonInfo);\r\n        progressBar.appendText(\"0\");\r\n        progressBar.addStart();\r\n        progressBar.addStop();\r\n    }\r\n\r\n    function setupEventListeners() {\r\n        canvas.addEventListener(\"mousedown\", function (evt) {\r\n            mouseDown = true;\r\n            checkWithinRange(canvas, evt);\r\n        });\r\n        canvas.addEventListener(\"mouseup\", function (evt) {\r\n            if (editMode) {\r\n                if (arrowMode === 1) {\r\n                    arrowMode = 2;\r\n                    checkWithinRange(canvas, evt);\r\n                    if ((arrowPoints[0] != null) && (arrowPoints[1] != null)) {\r\n                        addArrow();\r\n                    } else {\r\n                        alert(\"Dragged line was not between two data points\");\r\n                    }\r\n                    //Reset arrow points\r\n                    arrowPoints[0] = null;\r\n                    arrowPoints[1] = null;\r\n                }\r\n                mouseDown = false;\r\n                dataPointToMove = -1; //No current selected dataPoint\r\n            }\r\n            if (data.arrows.length > 0) {\r\n                updateArrows(-1);\r\n            }\r\n        });\r\n        canvas.addEventListener(\"mousemove\", function (evt) {\r\n            if (editMode) {\r\n                if (mouseDown) {\r\n                    var mousePos = getMousePos(canvas, evt);\r\n                    var newMousePos = canvasToThreePos(mousePos);\r\n                    if (dataPointToMove > -1) {\r\n                        data.dataPoints[dataPointToMove].setPosition(newMousePos.x, newMousePos.y, 0);\r\n                        data.dataPoints[dataPointToMove].moveText(newMousePos.x, newMousePos.y);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function checkWithinRange(canvas, evt) {\r\n        var mousePos = canvasToThreePos(getMousePos(canvas, evt));\r\n        //Check if click was on data point\r\n        if (editMode) {\r\n            for (var i = 0; i < data.dataPoints.length; i++) {\r\n                var selected = data.dataPoints[i].withinCircle(mousePos.x, mousePos.y);\r\n                if (selected && arrowMode === 1) {\r\n                    arrowPoints[0] = i\r\n                } else if (selected && arrowMode === 2) {\r\n                    arrowPoints[1] = i\r\n                } else if (selected) {\r\n                    dataPointToMove = i;\r\n                    dataPointToDelete = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (dataPointToMove === -1 && progressBar) { //Click was not on a datapoint\r\n            dataPointToDelete = -1; //Deselect previous selection\r\n            if (data.animationData && !isDataLoaded()) {\r\n                alert(\"Please import data first\");\r\n                return;\r\n            }\r\n\r\n            //Check if click was on progress bar\r\n            if (progressBar.withinBar(mousePos.x, mousePos.y) && data.animationData) {\r\n                var clickedStep = progressBar.getStep(mousePos.x);\r\n                let text = data.animationData[clickedStep - 1];\r\n                progressBar.updateProgress(clickedStep, text ? text[0] : \"0\")\r\n                data.step = clickedStep - 1;\r\n                applyStep();\r\n            } else if (progressBar.withinStop(mousePos.x, mousePos.y)) {\r\n                paused = true;\r\n            } else if (progressBar.withinStart(mousePos.x, mousePos.y)) {\r\n                paused = false;\r\n                stepForward();\r\n            }\r\n        }\r\n    }\r\n\r\n    function getMousePos(canvas, evt) {\r\n        var rect = canvas.getBoundingClientRect();\r\n        return {\r\n            x: evt.clientX - rect.left,\r\n            y: evt.clientY - rect.top\r\n        };\r\n    }\r\n\r\n    function canvasToThreePos(mousePos) {\r\n        var rect = canvas.getBoundingClientRect();\r\n        var newX, newY;\r\n        newX = (rect.width / 2) - mousePos.x;\r\n        newY = mousePos.y - (rect.height / 2);\r\n        return {\r\n            x: newX,\r\n            y: newY\r\n        };\r\n    }\r\n\r\n    function buildScene() {\r\n        setupEventListeners();\r\n        const scene = new THREE.Scene();\r\n        scene.background = new THREE.Color(\"#FFF\");\r\n        return scene;\r\n    }\r\n\r\n    function buildRender({\r\n        width,\r\n        height\r\n    }) {\r\n        const renderer = new THREE.WebGLRenderer({\r\n            canvas: canvas,\r\n            antialias: true,\r\n            alpha: true\r\n        });\r\n        const DPR = window.devicePixelRatio ? window.devicePixelRatio : 1;\r\n        renderer.setPixelRatio(DPR);\r\n        renderer.setSize(width, height);\r\n\r\n        renderer.gammaInput = true;\r\n        renderer.gammaOutput = true;\r\n\r\n        return renderer;\r\n    }\r\n\r\n    function buildCamera({\r\n        width,\r\n        height\r\n    }) {\r\n        var camera = new THREE.OrthographicCamera(width / -2, width / 2, height / -2, height / 2, 1, 1000);\r\n        camera.position.set(0, 0, -10);\r\n        camera.lookAt(origin)\r\n        return (camera);\r\n    }\r\n\r\n    function isDataLoaded() {\r\n        if (data && !data.dataLoaded()) {\r\n            alert(\"Please import data first\");\r\n        }\r\n        return data.dataLoaded();\r\n    }\r\n\r\n    async function startStepping() {\r\n        if (isDataLoaded()) {\r\n            paused = false;\r\n            stepForward();\r\n        }\r\n    }\r\n\r\n    async function stepForward() {\r\n        if (data.hasNextStep()) {\r\n            if (!paused) {\r\n                applyStep();\r\n                data.step += stepInc;\r\n                await actionUtil.sleep(data.stepDelay);\r\n                stepForward();\r\n            }\r\n        }\r\n    }\r\n\r\n    function applyStep() {\r\n        let text = data.step < 0 ? '0' : data.animationData[data.step][0];\r\n        if (data.step >= 0) {\r\n            colorPoints();\r\n        }\r\n        progressBar.updateProgress(data.step + 1, text);\r\n    }\r\n\r\n    function colorPoints() {\r\n        let changePercent, diff;\r\n\r\n        for (let i = 0; i < data.dataPoints.length; i++) {\r\n            if (data.animationData[data.step][i + 1] > halfQuantity) { //i+1 because column 0 holds time info\r\n                //Darken\r\n                diff = data.animationData[data.step][i + 1] - halfQuantity;\r\n                changePercent = diff / halfQuantity;\r\n                data.dataPoints[i].darkenColor(changePercent * 50); //Multiply by 50 - percent available to darken by\r\n            } else {\r\n                //Lighten\r\n                diff = halfQuantity - data.animationData[data.step][i + 1];\r\n                changePercent = diff / halfQuantity;\r\n                data.dataPoints[i].lightenColor(changePercent * 50); //Multiply by 50 - percent available to lighten by\r\n            }\r\n        }\r\n        if (data.fluxData != null) {\r\n            for (let i = 0; i < data.arrows.length; i++) {\r\n                if (data.fluxData[data.step][i + 1] > halfFlux) { //i+1 because column 0 holds time info\r\n                    //Darken\r\n                    diff = data.fluxData[data.step][i + 1] - halfFlux;\r\n                    changePercent = diff / halfFlux;\r\n                    scene.remove(data.arrows[i].object);\r\n                    data.arrows[i].darkenColor(changePercent * 50); //Multiply by 50 - percent available to darken by\r\n                    scene.add(data.arrows[i].object) //Add newly colored arrow\r\n                } else {\r\n                    //Lighten\r\n                    diff = halfFlux - data.fluxData[data.step][i + 1];\r\n                    changePercent = diff / halfFlux;\r\n                    scene.remove(data.arrows[i].object);\r\n                    data.arrows[i].lightenColor(changePercent * 50); //Multiply by 50 - percent available to lighten by\r\n                    scene.add(data.arrows[i].object) //Add newly colored arrow\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function restoreArrow(savedData) {\r\n        let arrow = new FluxArrow(savedData.arrowInfo);\r\n        scene.add(arrow.object);\r\n        return arrow;\r\n    }\r\n\r\n    function restoreDataPoint(savedData) {\r\n        let labels = data.labels;\r\n        let dataPoint = new DataPoint(savedData);\r\n        scene.add(dataPoint.object.mesh);\r\n        scene.add(dataPoint.shadow.mesh);\r\n        let labelText = savedData.textMesh ? savedData.textMesh.geometries[0].text : \" \";\r\n        if (!labelText)\r\n            labelText = \" \";\r\n        dataPoint.appendText(fontResource, labelText, dataPoint.position.x, dataPoint.position.y);\r\n        scene.add(dataPoint.textMesh);\r\n        labels.push(labelText);\r\n        return dataPoint;\r\n    }\r\n\r\n    function addDataPoint() {\r\n        let labels = data.labels;\r\n        let labelMode = data.labelMode;\r\n        let dataPoints = data.dataPoints;\r\n        var labelText;\r\n        if (labelMode && labels.length > dataPoints.length + 1) {\r\n            labelText = labels[dataPoints.length + 1]\r\n        } else {\r\n            if (labelMode && labels.length <= dataPoints.length) {\r\n                labelText = window.prompt(\"Imported data does not contain a column #\" + dataPoints.length + \".\\nPlease label your data point: \");\r\n\r\n            } else {\r\n                labelText = window.prompt(\"Label your data point: \");\r\n            }\r\n        }\r\n        if ((!labelText) || (labelText === \"\")){\r\n            alert(\"No label entered\");\r\n            return;\r\n        }\r\n        let dataPoint = new DataPoint();\r\n        scene.add(dataPoint.object.mesh);\r\n        scene.add(dataPoint.shadow.mesh);\r\n\r\n        dataPoint.changeColor(baseColor);\r\n        dataPoint.adjustScale(radius);\r\n        dataPoint.appendText(fontResource, labelText, dataPoint.position.x, dataPoint.position.y);\r\n        scene.add(dataPoint.textMesh);\r\n        dataPoints.push(dataPoint);\r\n        labels.push(labelText);\r\n\r\n        dataPoint.setPosition( 0, 0, 0);\r\n        dataPoint.moveText( 0, 0);\r\n    }\r\n\r\n    function removeFromScene(dataPoint) {\r\n        scene.remove(dataPoint.object.mesh);\r\n        scene.remove(dataPoint.shadow.mesh);\r\n        scene.remove(dataPoint.textMesh);\r\n    }\r\n\r\n    function addArrow() {\r\n        let arrows = data.arrows;\r\n        var shift = false;\r\n        //Check if new arrow is between an already arrowed combination\r\n        for (var i = 0; i < arrows.length; i++){\r\n            if (arrows[i].arrowInfo.pointIndex1 === arrowPoints[0] && arrows[i].arrowInfo.pointIndex2 === arrowPoints[1]){\r\n                //Arrow already exists in that direction-- do nothing\r\n                return\r\n            }\r\n            if (arrows[i].arrowInfo.pointIndex1 === arrowPoints[1] && arrows[i].arrowInfo.pointIndex2 === arrowPoints[0]){\r\n                //Arrow exists in opposite direction-- shift new arrow\r\n                shift = true;\r\n            }\r\n        }\r\n        var arrowInfo = {\r\n            shift: shift,\r\n            len: 200,\r\n            pointIndex1: arrowPoints[0],\r\n            pointIndex2: arrowPoints[1],\r\n            point1: data.dataPoints[arrowPoints[0]].position,\r\n            point2: data.dataPoints[arrowPoints[1]].position,\r\n            dataPointRadius: radius,\r\n        }\r\n        let arrow = new FluxArrow(arrowInfo);\r\n        scene.add(arrow.object);\r\n        arrowMode = 0;\r\n        arrows.push(arrow);\r\n    }\r\n\r\n    function updateArrows(deletedDataPoint) {\r\n        let arrows = data.arrows;\r\n        for (var i = 0; i < arrows.length; i++) {\r\n            var index1 = arrows[i].arrowInfo.pointIndex1;\r\n            var index2 = arrows[i].arrowInfo.pointIndex2;\r\n            if ((index1 === deletedDataPoint) || (index2 === deletedDataPoint)) {\r\n                scene.remove(arrows[i].object)\r\n                arrows.splice(i, 1);\r\n                i--; //To go back and check arrow that just moved into i'th position\r\n            } else {\r\n                if ((index1 > deletedDataPoint) && (deletedDataPoint !== -1)) {\r\n                    index1--;\r\n                    arrows[i].arrowInfo.pointIndex1--;\r\n                } \r\n                if ((index2 > deletedDataPoint) && (deletedDataPoint !== -1)){\r\n                    index2--;\r\n                    arrows[i].arrowInfo.pointIndex2--;\r\n                }\r\n                arrows[i].updatePos(data.dataPoints[index1].position, data.dataPoints[index2].position);\r\n            }\r\n        }\r\n    }\r\n\r\n    function deleteDataPoint() {\r\n        if (dataPointToDelete > -1) {\r\n            removeFromScene(data.dataPoints[dataPointToDelete]);\r\n            data.dataPoints.splice(dataPointToDelete, 1);\r\n            data.labels.splice(dataPointToDelete, 1);\r\n        }\r\n        updateArrows(dataPointToDelete);\r\n    }\r\n\r\n    function changeColor(newColor) {\r\n        data.color = newColor;\r\n        for (var i = 0; i < data.dataPoints.length; i++) {\r\n            data.dataPoints[i].changeColor(newColor);\r\n        }\r\n    }\r\n\r\n    function changeAllRadius() {\r\n        for (let i = 0; i < data.dataPoints.length; i++) {\r\n            data.dataPoints[i].adjustScale(radius);\r\n            data.dataPoints[i].changeTextSize(radius)\r\n        }\r\n        for (let i = 0; i < data.arrows.length; i++){\r\n            data.arrows[i].adjustScale(radius);\r\n        }\r\n    }\r\n\r\n    function update() {\r\n        renderer.render(scene, camera);\r\n    }\r\n\r\n    return {\r\n        update\r\n    }\r\n}","import React, {\r\n  Component\r\n} from 'react';\r\nimport threeEntryPoint from '../lib/threejs/threeEntryPoint';\r\n\r\n/* Imported From: https://itnext.io/how-to-use-plain-three-js-in-your-react-apps-417a79d926e0 */\r\nexport default class ThreeContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.IController = this.props.IController;\r\n    this.dataContext = this.props.dataContext;\r\n  }\r\n\r\n  componentDidMount() {\r\n    threeEntryPoint(this.threeRootElement, this.dataContext, this.IController);\r\n  }\r\n\r\n  render() {\r\n    var threeStyle = {\r\n      width: '100%',\r\n      height: '100%',\r\n      borderStyle: 'solid',\r\n      borderWidth: '3px',\r\n      borderColor: 'gray'\r\n    };\r\n\r\n    return ( <div title={\"THREE\"} style={threeStyle} ref={element => this.threeRootElement = element} > </div>);\r\n  }\r\n}","/** Imported From:  https://github.com/PierfrancescoSoffritti/pierfrancescosoffritti.com/blob/master/src/components/home/header/threejs/threeEntryPoint.js*/\r\nimport SceneManager from './SceneManager';\r\n// import DataContext from './DataContext';\r\n\r\nexport default (container, dataContext, IController) => {\r\n    const canvas = createCanvas(document, container);\r\n    // const dataContext = new DataContext(IController);\r\n    const sceneManager = new SceneManager(canvas, IController, dataContext);\r\n\r\n    render();\r\n\r\n    function createCanvas(document, container) {\r\n        const canvas = document.createElement('canvas');  \r\n        canvas.width = container.scrollWidth;\r\n        canvas.height = container.scrollHeight;\r\n        container.appendChild(canvas);\r\n        return canvas;\r\n    }\r\n   \r\n    function render() {\r\n        requestAnimationFrame(render);\r\n        sceneManager.update();\r\n    }\r\n}","export default class FileUtilities {\r\n\r\n  processXLSXIntoCSV(xlsxFile, onComplete) {\r\n    var reader = new FileReader();\r\n    reader.readAsBinaryString(xlsxFile);\r\n    reader.onload = () => {\r\n      var csvSheetStrings = this.transformXLXSIntoCsvStrings(reader.result);\r\n      onComplete(this.parseSingleCSV(csvSheetStrings[0]));\r\n    }\r\n  }\r\n\r\n  processPlotsData(file, onComplete){\r\n    var reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      let text = reader.result;\r\n      onComplete(JSON.parse(text));\r\n    }\r\n  }\r\n\r\n  transformXLXSIntoCsvStrings(binaryContents) {\r\n    const XLSX = require('xlsx')\r\n    const binaryType = {\r\n      type: 'binary'\r\n    };\r\n    var csvStrings = [];\r\n    var workbook = XLSX.read(binaryContents, binaryType);\r\n    workbook.SheetNames.forEach(name => {\r\n      csvStrings.push(XLSX.utils.sheet_to_csv(workbook.Sheets[name]));\r\n    });\r\n\r\n    return csvStrings;\r\n  }\r\n\r\n  parseSingleCSV(csvString) {\r\n    var numOfRows = 0;\r\n    var numOfColumns = 1;\r\n    var ch, i;\r\n    //Count rows\r\n    for (i = 0; i < csvString.length; i++) {\r\n      ch = csvString.charAt(i);\r\n      if (ch === '\\n') {\r\n        numOfRows++\r\n      }\r\n    }\r\n    //Count columns\r\n    ch = '';\r\n    i = 0;\r\n    while (ch !== '\\n') {\r\n      ch = csvString.charAt(i);\r\n      if (ch === ',') {\r\n        numOfColumns++;\r\n      }\r\n      i++;\r\n    }\r\n    //Create 2D array to hold xlsx data\r\n    this.data = new Array(numOfRows);\r\n    for (i = 0; i < numOfRows; i++) {\r\n      this.data[i] = new Array(numOfColumns);\r\n    }\r\n    //Fill array\r\n    for (i = 0; i < this.data.length; i++) {\r\n      var rows = csvString.split(\"\\n\");\r\n      this.data[i] = rows[i].split(\",\");\r\n    }\r\n    //Remove multiple label rows, starting at 1 (after first label row)\r\n    for (i = 1; i < this.data.length; i++){\r\n      if ((this.data[i][0] === \"t\") || (this.data[i][1] === \"-\")) {\r\n        this.data.splice(i, 1);\r\n      }\r\n    }\r\n    return this.data;\r\n  }\r\n}","import React from 'react';\r\nimport FormGroup from 'react-bootstrap/lib/FormGroup';\r\nimport FormControl from 'react-bootstrap/lib/FormControl';\r\nimport ControlLabel from 'react-bootstrap/lib/ControlLabel';\r\nimport FileUtilities from '../lib/FileUtilities';\r\nimport NavItem from 'react-bootstrap/lib/NavItem';\r\n\r\nexport default class FileInput extends NavItem {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.title = this.props.title || \"Upload file\";\r\n    this.processUpload = this.processUpload.bind(this);\r\n    this.state = { callback: this.props.onDone, accept: this.props.accept, plot: this.props.isPlot };\r\n  }\r\n\r\n  hasNoFiles(files){\r\n    return files.length === 0;\r\n  }\r\n\r\n  processUpload(e){\r\n    if(this.state.plot)\r\n      this.readPlots(e.target.files, this.state.callback);\r\n    else\r\n      this.readXLSX(e.target.files, this.state.callback);\r\n  }\r\n\r\n  readPlots(files, callback){\r\n    const call = callback;\r\n    let fileUtil = new FileUtilities();\r\n    if(files.length === 0)\r\n      return;\r\n    fileUtil.processPlotsData(files[0], function(dataString){\r\n       call(dataString);\r\n    });\r\n  }\r\n\r\n  readXLSX(files, callback){\r\n    const call = callback;\r\n    let fileUtil = new FileUtilities();\r\n    if(this.hasNoFiles(files))\r\n      return;\r\n    fileUtil.processXLSXIntoCSV(files[0], function(dataString){\r\n       call(dataString);\r\n    });\r\n  }\r\n\r\n  render () {\r\n      return (\r\n        <FormGroup>\r\n         <ControlLabel htmlFor={this.title} style={{ cursor: \"pointer\" }}>\r\n              {this.title}\r\n              <FormControl id={this.title}\r\n                           type=\"file\" \r\n                           accept={this.accept}\r\n                           onChange={this.processUpload} \r\n                           ref={input => {this.fileInput = input;}} \r\n                           style={{ display: \"none\" }} />\r\n          </ControlLabel>\r\n        </FormGroup>\r\n      );\r\n  }\r\n}\r\n        ","export class PlotData {\r\n    constructor(id = \"untracked\") {\r\n        this.id = id;\r\n        this.dataPoints = [];\r\n        this.labels = [];\r\n        this.arrows = [];\r\n        this.step = 0;\r\n        this.fluxMax = 1;\r\n        this.valueMax = 1;\r\n        this.stepDelay = 300;\r\n        this.color = [70, 156, 150, 1];\r\n        this.skipSteps = 1;\r\n    }\r\n}\r\n\r\nexport default PlotData;","import PlotData from './threejs/PlotData';\r\nimport localforage from 'localforage';\r\n\r\nconst WEB_STORAGE_KEY = \"plots\";\r\n\r\nexport default class LocalStorage {\r\n\r\n    async addNewModelToLocal(modelName){\r\n        let model = this.newModelTemplate(modelName);\r\n        let models = await this.loadModelsFromDefaultContainer();\r\n        models.push(model);\r\n        await this.saveToStore(WEB_STORAGE_KEY, models, \"Failed to add a new model\").catch(() => {return model}); \r\n        return model;\r\n    }\r\n\r\n    async saveToStore(key, value, failureMsg = \"Failed to write to storage\"){\r\n        try {\r\n            await localforage.setItem(key, \"!\" + JSON.stringify(value));\r\n        } catch (error) {\r\n            alert(failureMsg + String(error));\r\n        }\r\n    }\r\n\r\n    async fetchFromStore(key, failureMsg = \"Failed to fetch from storage\"){\r\n        try {\r\n            let result = await localforage.getItem(key);\r\n            if(!result)\r\n                return null;\r\n            return JSON.parse(result.substring(1));\r\n        } catch (error) {\r\n            alert(failureMsg + \": \" + String(error));            \r\n        }\r\n    }\r\n\r\n    //  item must have name of plot\r\n    //  addition must be PlotData\r\n    async updateStorage(name, addition){\r\n        let models = await this.loadModelsFromDefaultContainer();\r\n        for (const modelId in models) {\r\n            if (models.hasOwnProperty(modelId) && models[modelId].name === name) {\r\n                const element = models[modelId];\r\n                let id = element.versions.length + 1;\r\n                addition.id = name + id;\r\n                element.versions = [this.newModelVersion(addition)];\r\n            }\r\n        }\r\n        this.saveToStore(WEB_STORAGE_KEY, models, \"Failed to save the models\");\r\n    }\r\n    \r\n    async removeFromStorage(name){\r\n        let models = await this.loadModelsFromDefaultContainer();\r\n        let reducedList = [];\r\n        for (const modelId in models) {\r\n            if (models.hasOwnProperty(modelId)) {\r\n                if(models[modelId].name !== name){\r\n                    reducedList.push(models[modelId]);\r\n                }\r\n            }\r\n        }\r\n        this.saveToStore(WEB_STORAGE_KEY, reducedList, \"Failed to save the models\");\r\n    }\r\n\r\n    async loadFromStorage() {\r\n        let models = await this.loadModelsFromDefaultContainer();\r\n        if(models.length === 0){\r\n            models.push(this.newModelTemplate());\r\n            this.saveToStore(WEB_STORAGE_KEY, models, \"Failed to save the models\");\r\n        }\r\n        return models;\r\n    }\r\n\r\n    async loadModelsFromDefaultContainer(){\r\n        let models = await this.fetchFromStore(WEB_STORAGE_KEY, \"Failed to Access Memory\").catch();\r\n        if (!models || !models.length) {\r\n            models = [];\r\n        }\r\n        return models;\r\n    }\r\n    \r\n    async writeToLocalStorage(dataArray){\r\n        if (!dataArray || !dataArray.length) {\r\n            dataArray = [];\r\n        }\r\n        await this.saveToStore(WEB_STORAGE_KEY, dataArray);\r\n    }\r\n\r\n    newModelTemplate(name = \"Default Storage\") {\r\n       return {\r\n                name: name,\r\n                versions: [this.newModelVersion(new PlotData(name + \".\" + 1))]\r\n            };\r\n    }\r\n\r\n    newModelVersion(model){\r\n        return {\r\n            plot: model\r\n        }\r\n    }\r\n\r\n}","import React, { Component } from 'react';\r\nimport Navbar from 'react-bootstrap/lib/Navbar';\r\nimport Button from 'react-bootstrap/lib/Button';\r\nimport Form from 'react-bootstrap/lib/Form';\r\nimport FileInput from './FileInput';\r\nimport localStorage from '../lib/LocalStorage';\r\nimport '../css/nav.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nclass Navigation extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.IController = this.props.IController;\r\n    this.dataContext = this.props.dataContext;\r\n\r\n    this.uploadPoints = this.uploadDataPoints.bind(this);\r\n    this.uploadFlux = this.uploadFluxData.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n    this.processUpload = this.processUpload.bind(this);\r\n  }\r\n\r\n  async downloadLocalStorage(){\r\n    toast(\"Prepping Download\", { \r\n      position: toast.POSITION.TOP_LEFT\r\n    });\r\n    let data = JSON.stringify(await (new localStorage()).loadModelsFromDefaultContainer());\r\n    var blobData = new Blob([data], {type: 'text/plain'});\r\n    let textFile = window.URL.createObjectURL(blobData);\r\n    let downloadAnchorNode = document.createElement('a');\r\n    downloadAnchorNode.setAttribute(\"href\", textFile);\r\n    downloadAnchorNode.setAttribute(\"download\", \"plots.json\");\r\n    document.body.appendChild(downloadAnchorNode);\r\n    downloadAnchorNode.click();\r\n    downloadAnchorNode.remove();\r\n  }\r\n\r\n  processUpload(e){\r\n    this.readPlots(e.target.files);\r\n  }\r\n\r\n  reset(e){\r\n    e.preventDefault();\r\n    toast(\"Resetting Animation\", { \r\n      position: toast.POSITION.TOP_LEFT\r\n    });\r\n    this.IController.resetDataAnimation();\r\n  }\r\n\r\n  uploadDataPoints(data){\r\n      toast(\"Upload Point Data Complete\", { \r\n        position: toast.POSITION.TOP_LEFT\r\n      });\r\n      this.dataContext.injectDataPointList(data);\r\n  }\r\n\r\n  uploadFluxData(data) {\r\n    toast(\"Upload Flux Data Complete\", { \r\n      position: toast.POSITION.TOP_LEFT\r\n    });\r\n    this.dataContext.injectFluxList(data);\r\n  }\r\n\r\n  async  uploadModels(data) {\r\n    if(data && window.confirm(\"Warning! This will replace all of your models with the uploaded models. Continue?\")){\r\n      await (new localStorage()).writeToLocalStorage(data);\r\n      window.location.reload();\r\n      return;\r\n    }\r\n    toast(\"No Models Uploaded\", { \r\n      position: toast.POSITION.TOP_LEFT\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    let preventRedirect = e => {\r\n      e.preventDefault();\r\n    };\r\n\r\n    let nav = {\r\n      margin: 10\r\n    };\r\n\r\n    return (\r\n        <Navbar inverse id='nomargin'>\r\n          <Navbar.Header>\r\n            <Navbar.Brand>\r\n              <a href=\"/\">Compartmental Visualizer</a>\r\n            </Navbar.Brand>\r\n          </Navbar.Header>\r\n          <Form inline>\r\n            <FileInput style={nav} onDone={this.uploadPoints} isPlot={false} accept=\".xlsx\" onClick={preventRedirect} title={\"Upload Point Data\"}/>\r\n            <FileInput style={nav} onDone={this.uploadFlux} isPlot={false} accept=\".xlsx\" onClick={preventRedirect} title={\"Upload Flux Data\"}/>\r\n            <Button id='reset' onClick={this.reset}>Reset\r\n              <ToastContainer autoClose={1500} />\r\n            </Button>\r\n            <Button id='export' onClick={this.downloadLocalStorage}>Export Models\r\n              <ToastContainer autoClose={1500} />\r\n            </Button>\r\n            <FileInput onDone={this.uploadModels} isPlot={true} accept=\".json\" onClick={preventRedirect} title={\"Upload Compartment Models\"}/>\r\n          </Form>\r\n        </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;","import React, { Component } from 'react';\r\nexport default class SavedPlot extends Component {\r\n\r\n  constructor(param){\r\n    super(param);\r\n    this.dataCapsule = this.props.dataCapsule;\r\n    this.name = this.dataCapsule.name;\r\n    this.className = this.props.className;\r\n  }\r\n\r\n  render() {\r\n    return ( \r\n        <div className={this.className}>{this.name}</div>\r\n    );\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport SavedPlot from './SavedPlot';\r\nimport Button from 'react-bootstrap/lib/Button';\r\nimport LocalStorage from '../lib/LocalStorage';\r\nimport { toast } from 'react-toastify';\r\nimport { AsyncSeriesWaterfallHook } from 'tapable';\r\n\r\nexport default class StorageList extends Component {\r\n\r\n  constructor(param){\r\n    super(param);\r\n    const parent = this;\r\n    this.entries = [];\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.addToLocal = this.addToLocal.bind(this);\r\n    this.removeFromLocal = this.removeFromLocal.bind(this);\r\n    this.loadSaves = this.loadSaves.bind(this);\r\n    this.createButtonEntry = this.createButtonEntry.bind(this);\r\n    this.createEntryName = this.createEntryName.bind(this);\r\n    this.createGrid = this.createGrid.bind(this);\r\n    this.state = {dataContext: parent.props.dataContext};\r\n    this.loadSaves();\r\n  }\r\n\r\n  isActive(capsule){\r\n    return this.state.dataContext.currentPlot().id === capsule.versions[capsule.versions.length - 1].plot.id;\r\n  }\r\n\r\n  applyName(capsule){\r\n    return this.isActive(capsule) ? \"Save\" : \"Load\";\r\n  }\r\n\r\n  createButtonEntry(save){\r\n      return <Button key={this.entries.length} className=\"grid-item\" onClick={() => this.handleClick(save)}>{this.applyName(save)}</Button>;\r\n  }\r\n\r\n  createEntryName(save){\r\n      return <SavedPlot key={this.entries.length} className=\"grid-item\" dataCapsule={save}/>;\r\n  }\r\n\r\n  async addToLocal(){\r\n    let resp = this.solictStorageName('you would like to add.');\r\n    if(!!resp){\r\n      await (new LocalStorage()).addNewModelToLocal(resp);\r\n      await this.loadSaves();\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n  \r\n  async removeFromLocal(){\r\n    let resp = this.solictStorageName('you would like to permanently delete.');\r\n    if(!!resp){\r\n      await (new LocalStorage()).removeFromStorage(resp);\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  solictStorageName(extension) {\r\n    return window.prompt('Please enter the name of Model ' + extension);\r\n  }\r\n\r\n  async handleClick(s) {\r\n    if(this.isActive(s)){\r\n      let plot = this.state.dataContext.currentPlot();\r\n      await (new LocalStorage()).updateStorage(s.name, plot);\r\n      toast.success(\"Model Saved\");\r\n    } else {\r\n      await this.loadSaves();\r\n      this.state.dataContext.currentPlot(s);\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  async loadSaves(){\r\n    this.entries = [];\r\n    let models = await (new LocalStorage()).loadFromStorage(this.ThreeController);\r\n    let dataContext = this.state.dataContext;\r\n    this.setState({\r\n        dataContext: dataContext,\r\n        models: models\r\n    });\r\n  }\r\n\r\n  createGrid(){\r\n    if(this.state.models){\r\n      this.entries = [];\r\n      this.state.models.forEach(s => {\r\n        this.entries.push(this.createEntryName(s));\r\n        this.entries.push(this.createButtonEntry(s));\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    this.createGrid();\r\n\r\n    return ( \r\n        <div>\r\n          <div className=\"grid-container\">\r\n            {this.entries}\r\n          </div>\r\n          <div className=\"grid-container\">\r\n            <Button id=\"new-plot\" onClick={this.addToLocal}>New Plot</Button>\r\n            <Button id=\"delete-plot\" onClick={this.removeFromLocal}>Delete Plot</Button>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n}","export default (PlotData) => {\r\n\r\n    let context = {};\r\n\r\n    context.plot_id = PlotData.id;\r\n    \r\n    context.callbacks = [];\r\n    context.labelMode = false;\r\n    context.onLoad = null;\r\n    context.animationData = null;\r\n    context.fluxData = null;\r\n\r\n    Object.assign(context, PlotData);\r\n\r\n    context.callObservers = () => {\r\n        context.callbacks.forEach(call => {\r\n           call(); \r\n        });\r\n    };\r\n\r\n    context.registerCallback = (call) => {\r\n        context.callbacks.push(call);\r\n    };\r\n\r\n    context.currentPlot = (plot = null) => {\r\n        if(plot){\r\n            return context.loadPlot(plot.versions[plot.versions.length - 1].plot);\r\n        } else{\r\n            return {\r\n                id: context.plot_id,\r\n                dataPoints: context.dataPoints,\r\n                labels: context.labels,\r\n                arrows: context.arrows,\r\n                step: context.step,\r\n                valueMax: context.valueMax,\r\n                fluxMax: context.fluxMax,\r\n                stepDelay: context.stepDelay,\r\n                color: context.color,\r\n                skipSteps: context.skipSteps\r\n            }\r\n        }\r\n    };\r\n\r\n    context.loadPlot = (plot) => {\r\n        Object.assign(context, plot);\r\n        context.plot_id = plot.id;\r\n        context.callObservers();\r\n        return plot;\r\n    };\r\n\r\n    context.injectDataPointList = json => loadPointData(json, context);\r\n    context.injectFluxList = json => loadFluxData(json, context);\r\n\r\n    context.dataLoaded = function dataLoaded() {\r\n        return context.animationData != null;\r\n    }\r\n\r\n    context.hasNextStep = function hasNextStep() {\r\n        return context.dataLoaded() && context.step < context.animationData.length;\r\n    }\r\n\r\n    return context;\r\n\r\n    function loadFluxData(xlsxData, instance) {\r\n        xlsxData.splice(0, 1); //Remove label column\r\n        instance.fluxData = xlsxData;\r\n        if (instance.onLoad && typeof instance.onLoad === \"function\")\r\n            instance.onLoad();\r\n    }\r\n\r\n    function loadPointData(xlsxData, instance) {\r\n        instance.labels = xlsxData[0];\r\n        xlsxData.splice(0, 1); //Remove label column\r\n        instance.animationData = xlsxData;\r\n        if (instance.onLoad && typeof instance.onLoad === \"function\")\r\n            instance.onLoad();\r\n    }\r\n\r\n}","import React, { Component } from 'react';\r\nimport './css/App.css';\r\nimport ThreeContainer from './components/ThreeContainer';\r\nimport Navigation from './components/Navigation';\r\nimport StorageList from './components/StorageList.js';\r\nimport LocalStorage from './lib/LocalStorage.js';\r\nimport Grid from 'react-bootstrap/lib/Grid';\r\nimport Row from 'react-bootstrap/lib/Row';\r\nimport Col from 'react-bootstrap/lib/Col';\r\nimport DataContext from './lib/threejs/DataContext';\r\n\r\nclass App extends Component {\r\n \r\n  constructor(props){\r\n    super(props);\r\n    this.ThreeController = {\r\n      resetDataAnimation: function() {},\r\n      onLoad: function() {},\r\n      onFluxLoad: function() {}\r\n    };\r\n    this.fetchSaves()\r\n  }\r\n\r\n  async fetchSaves(){\r\n    let saves = await ((new LocalStorage()).loadFromStorage(this.ThreeController));\r\n    console.log(saves);\r\n    let currentPlot = saves[0].versions[saves[0].versions.length - 1].plot;\r\n    let currentContext = new DataContext(currentPlot);\r\n    this.setState({\r\n      saves: saves,\r\n      currentPlot: currentPlot,\r\n      currentContext: currentContext\r\n    });\r\n  }\r\n\r\n  render() {\r\n    var styleFill = {\r\n      height: '100%',\r\n    };\r\n\r\n    var datStyle = {\r\n      backgroundColor: 'grey',\r\n      height: '100%'\r\n    }\r\n\r\n    var col = {\r\n      padding: 0,\r\n      height: '100%'\r\n    }\r\n\r\n    if(!this.state || !this.state.currentContext)\r\n      return (<div>Loading From Storage</div>);\r\n\r\n    return (\r\n      <div className=\"App\" style={styleFill}>\r\n            <Grid fluid={true} style={styleFill}>\r\n              <Row>\r\n                  <Navigation dataContext={this.state.currentContext} IController={this.ThreeController} />\r\n              </Row>\r\n              <Row style={styleFill}>\r\n                <Col sm={10} md={10} style={col}> \r\n                  <ThreeContainer dataContext={this.state.currentContext} IController={this.ThreeController}/> \r\n                </Col>\r\n                <Col sm={2} md={2}>\r\n                  <Row sm={2} md={2}>\r\n                    <div style={datStyle} id=\"datGuiAnchor\"></div>\r\n                  </Row>\r\n                  <Row sm={2} md={2}>\r\n                    <br/>\r\n                    <br/>\r\n                  </Row>\r\n                  <Row sm={2} md={2}>\r\n                    <StorageList dataContext={this.state.currentContext} saves={this.saves}></StorageList>\r\n                  </Row>\r\n                </Col>\r\n              </Row>\r\n            </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport './css/bootstrap.min.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}