(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(t,e,n){t.exports=n(230)},114:function(t,e,n){},116:function(t,e,n){},120:function(t,e,n){},199:function(t,e){},200:function(t,e){},201:function(t,e,n){},230:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),s=n(67),i=n.n(s),r=(n(114),n(116),n(2)),c=n.n(r),l=n(6),h=n(4),u=n(13),d=n(20),p=n(18),f=n(19),m=(n(120),n(1)),v=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(h.a)(this,t);var a=n(73),o=!!e;this.baseColor=o?e.baseColor:"#aa00ff",this.radius=40,this.shadowMargin=7,this.shadowMargin=o?e.shadowMargin:7,this.shadowPushBack=1,this.textPullForward=-5,this.shadow={},this.shadow.geometry=new m.d(this.radius+this.shadowMargin,32),this.shadow.mesh=new m.g(this.shadow.geometry),this.shadow.mesh.material=new m.h({color:"#cccccc"}),this.object={},this.object.geometry=new m.d(this.radius,32),this.object.mesh=new m.g(this.object.geometry),this.object.mesh.material=new m.h({color:this.baseColor}),this.object.mesh.position.set(0,0,0),this.shadow.mesh.position.set(0,0,this.shadowPushBack),this.position=this.object.mesh.position,this.shadow.position=this.shadow.mesh.position,this.object.scale=this.object.mesh.scale,this.shadow.scale=this.shadow.mesh.scale,this.withinCircle=function(t,e){var n=this.object.mesh.position;return!(Math.sqrt((t-n.x)*(t-n.x)+(e-n.y)*(e-n.y))>this.radius)},this.adjustScale=function(t){this.radius=t;var e=this.radius/40;this.object.scale.set(e,e,e),this.shadow.scale.set(e,e,e)},this.appendText=function(t,e,n,a){var o=new m.k(e,{font:t,size:13,height:5,curveSegments:12,bevelEnabled:!1,bevelThickness:1,bevelSize:2,bevelSegments:5}),s=new m.h({color:0});this.textMesh=new m.g(o,s),this.moveText(n,a),this.textMesh.rotation.set(0,0,Math.PI),this.changeTextSize(this.radius)},this.moveText=function(t,e){var n=(new m.b).setFromObject(this.textMesh);this.textMesh.position.set(t+.5*(n.max.x-n.min.x),e,this.textPullForward)},this.setPosition=function(t,e,n){this.position.set(t,e,n),this.shadow.position.set(t,e,this.shadowPushBack)},this.changeTextSize=function(t){var e=t/40;this.textMesh.scale.set(e,e,e+this.textPullForward)},this.transformColor=function(t){return a({r:t[0],g:t[1],b:t[2]}).toHexString()},this.changeColor=function(t){this.baseColor=this.transformColor(t),this.object.mesh.material.color.set(this.baseColor.toString())},this.lightenColor=function(t){this.object.mesh.material.color.set(a(this.baseColor).lighten(t).toString())},this.darkenColor=function(t){this.object.mesh.material.color.set(a(this.baseColor).darken(t).toString())},o&&(this.adjustScale(e.radius),this.object.mesh.position.set(e.position.x,e.position.y,e.position.z),this.shadow.mesh.position.set(e.shadow.position.x,e.shadow.position.y,e.shadow.position.z)),this.update=function(){}},w=n(99),b=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"sleep",value:function(t){return new Promise(function(e){return setTimeout(e,t)})}}]),t}(),g=function t(e,n,a){Object(h.a)(this,t);this.stepLength=0,this.buttonPosInfo=a,this.bar={},this.progress={},this.start={},this.stop={},this.bar.geometry=new m.c(500,20,1),this.bar.mesh=new m.g(this.bar.geometry),this.bar.mesh.material=new m.h({color:"#afafaf"}),this.progressLength=0,this.progress.geometry=new m.c(this.progressLength,20,1),this.progress.mesh=new m.g(this.progress.geometry),this.progress.mesh.material=new m.h({color:"#666666"}),this.bar.mesh.position.set(0,this.buttonPosInfo.startPos.y+25,0),this.progress.mesh.position.set((500-this.progressLength)/2,this.buttonPosInfo.startPos.y+25,0),e.add(this.bar.mesh),e.add(this.progress.mesh),this.updateProgress=function(t,e){this.stepLength*t<=500&&(this.progressLength=this.stepLength*t,this.progress.mesh.geometry=new m.c(this.progressLength,20,1),this.progress.mesh.position.set((500-this.progressLength)/2,this.buttonPosInfo.startPos.y+25,0),this.appendText(e))},this.appendText=function(t){null!=this.textMesh&&e.remove(this.textMesh);var a=new m.k(t,{font:n,size:10,height:5,curveSegments:12,bevelEnabled:!1,bevelThickness:1,bevelSize:2,bevelSegments:5}),o=new m.h({color:0});this.textMesh=new m.g(a,o),this.textMesh.position.set(250-this.progressLength,this.buttonPosInfo.startPos.y+50,0),this.textMesh.rotation.set(0,0,Math.PI),e.add(this.textMesh)},this.moveText=function(t,e){var n=(new m.b).setFromObject(this.textMesh);this.textMesh.position.set(t+.5*(n.max.x-n.min.x),e,0)},this.withinBar=function(t,e){return e>this.buttonPosInfo.startPos.y+10&&e<this.buttonPosInfo.startPos.y+35&&t<250&&t>-250},this.withinStart=function(t,e){var n=e>this.buttonPosInfo.startPos.y-15&&e<this.buttonPosInfo.startPos.y+15,a=t<this.buttonPosInfo.startPos.x+25&&t>this.buttonPosInfo.startPos.x-25;return n&&a},this.withinStop=function(t,e){var n=e>this.buttonPosInfo.stopPos.y-15&&e<this.buttonPosInfo.stopPos.y+15,a=t<this.buttonPosInfo.stopPos.x+25&&t>this.buttonPosInfo.stopPos.x-25;return n&&a},this.getStep=function(t){var e=250-t;return Math.round(e/this.stepLength)},this.addStart=function(){this.start.geometry=new m.c(50,30,1),this.start.mesh=new m.g(this.start.geometry),this.start.mesh.material=new m.h({color:"#00ff00"}),this.start.mesh.position.set(this.buttonPosInfo.startPos.x,this.buttonPosInfo.startPos.y,0),e.add(this.start.mesh);var t=new m.k("Start",{font:n,size:10,height:5,curveSegments:12,bevelEnabled:!1,bevelThickness:1,bevelSize:2,bevelSegments:5}),a=new m.h({color:0});a.depthTest=!1;var o=new m.g(t,a);o.position.set(this.buttonPosInfo.startPos.x+12.5,this.buttonPosInfo.startPos.y+7.5,0),o.rotation.set(0,0,Math.PI),e.add(o)},this.addStop=function(){this.stop.geometry=new m.c(50,30,1),this.stop.mesh=new m.g(this.stop.geometry),this.stop.mesh.material=new m.h({color:"#ff0000"}),this.stop.mesh.position.set(this.buttonPosInfo.stopPos.x,this.buttonPosInfo.stopPos.y,0),e.add(this.stop.mesh);var t=new m.k("Stop",{font:n,size:10,height:5,curveSegments:12,bevelEnabled:!1,bevelThickness:1,bevelSize:2,bevelSegments:5}),a=new m.h({color:0});a.depthTest=!1;var o=new m.g(t,a);o.position.set(this.buttonPosInfo.stopPos.x+12.5,this.buttonPosInfo.stopPos.y+7.5,0),o.rotation.set(0,0,Math.PI),e.add(o)},this.setSteps=function(t){this.stepLength=500/t},this.getBar=function(){return this.progress.mesh}},x=function t(e){Object(h.a)(this,t);var a=n(73);this.arrowInfo=e;var o=e.dataPointRadius/40*22,s=e.dataPointRadius/40*15;this.calculateLength=function(){var t=Math.sqrt((this.arrowInfo.point2.x-this.arrowInfo.point1.x)*(this.arrowInfo.point2.x-this.arrowInfo.point1.x)+(this.arrowInfo.point2.y-this.arrowInfo.point1.y)*(this.arrowInfo.point2.y-this.arrowInfo.point1.y));return t-=2.5*this.arrowInfo.dataPointRadius},this.calculateDir=function(){return new m.l(this.arrowInfo.point2.x-this.arrowInfo.point1.x,this.arrowInfo.point2.y-this.arrowInfo.point1.y,0)},this.calculatePos=function(){var t=new m.l(1.25*e.dataPointRadius*this.dir.x,1.25*e.dataPointRadius*this.dir.y,0),n=e.dataPointRadius/3.5;return e.shift&&(this.dir.x-this.dir.y>=0?this.dir.y<=-.5?t.x+=n:t.y+=n:this.dir.y>=.5?t.x+=n:t.y+=n),new m.l(this.arrowInfo.point1.x+t.x,this.arrowInfo.point1.y+t.y,0)},this.baseColor="#222222",this.object={},this.dir=this.calculateDir(),this.dir.normalize(),this.length=this.calculateLength(),this.position=this.calculatePos(),this.object=new m.a(this.dir,this.position,this.length,this.baseColor,o,s),this.lightenColor=function(t){var e=a(this.baseColor).lighten(t).toString();this.object=new m.a(this.dir,this.position,this.length,e,o,s)},this.darkenColor=function(t){var e=a(this.baseColor).darken(t).toString();this.object=new m.a(this.dir,this.position,this.length,e,o,s)},this.updatePos=function(t,e){this.arrowInfo.point1=t,this.arrowInfo.point2=e,this.dir=this.calculateDir(),this.dir.normalize(),this.length=this.calculateLength(),this.position=this.calculatePos(),this.object.setLength(this.length,o,s),this.object.setDirection(this.dir),this.object.position.set(this.position.x,this.position.y,0)},this.setLength=function(t){this.object.setLength(t)},this.delete=function(){this.scene.remove(this.object)},this.adjustScale=function(t){e.dataPointRadius=t,o=e.dataPointRadius/40*22,s=e.dataPointRadius/40*15,this.updatePos(this.arrowInfo.point1,this.arrowInfo.point2)}},y=function(t,e,n){var a=new b,o=new m.l(0,0,0),s={width:t.width,height:t.height},i=!0,r=1;n.color=n.color||[70,156,150,1],n.stepDelay=n.stepDelay||300,n.valueMax=n.valueMax||1,n.fluxMax=n.fluxMax||1,n.skipSteps=n.skipSteps||1;var h,u,d,p=n.valueMax/2,f=n.fluxMax/2,y=[170,0,255,1],P=40,j=!1,k=-1,S=-1,C=0,O=[],I={size:40,valueMax:n.valueMax,fluxMax:n.fluxMax,stepDelay:n.stepDelay,color:n.color,skipSteps:n.skipSteps,changeStep:function(){!function(){U.apply(this,arguments)}()},addPoint:function(){u&&function(){var t,e=n.labels,a=n.labelMode,o=n.dataPoints;t=a&&e.length>o.length+1?e[o.length+1]:a&&e.length<=o.length?window.prompt("Imported data does not contain a column #"+o.length+".\nPlease label your data point: "):window.prompt("Label your data point: ");if(!t||""===t)return void alert("No label entered");var s=new v;M.add(s.object.mesh),M.add(s.shadow.mesh),s.changeColor(y),s.adjustScale(P),s.appendText(d,t,s.position.x,s.position.y),M.add(s.textMesh),o.push(s),e.push(t),s.setPosition(0,0,0),s.moveText(0,0)}()},addArrow:function(){u&&(C=1)},deletePoint:function(){u&&function(){S>-1&&(t=n.dataPoints[S],M.remove(t.object.mesh),M.remove(t.shadow.mesh),M.remove(t.textMesh),n.dataPoints.splice(S,1),n.labels.splice(S,1));var t;V(S)}()},editMode:!1,labelMode:!1};(new m.f).load("https://threejs.org//examples/fonts/helvetiker_regular.typeface.json",T);var M=function(){t.addEventListener("mousedown",function(e){j=!0,N(t,e)}),t.addEventListener("mouseup",function(a){u&&(1===C&&(C=2,N(t,a),null!=O[0]&&null!=O[1]?function(){for(var t=n.arrows,a=!1,o=0;o<t.length;o++){if(t[o].arrowInfo.pointIndex1===O[0]&&t[o].arrowInfo.pointIndex2===O[1])return;t[o].arrowInfo.pointIndex1===O[1]&&t[o].arrowInfo.pointIndex2===O[0]&&(a=!0)}var s={shift:a,len:200,pointIndex1:O[0],pointIndex2:O[1],point1:n.dataPoints[O[0]].position,point2:n.dataPoints[O[1]].position,dataPointRadius:P},i=new x(s);e.add(i.object),C=0,t.push(i)}():alert("Dragged line was not between two data points"),O[0]=null,O[1]=null),j=!1,k=-1),n.arrows.length>0&&V(-1)}),t.addEventListener("mousemove",function(e){if(u&&j){var a=A(t,e),o=R(a);k>-1&&(n.dataPoints[k].setPosition(o.x,o.y,0),n.dataPoints[k].moveText(o.x,o.y))}});var e=new m.j;return e.background=new m.e("#FFF"),e}(),E=function(e){var n=e.width,a=e.height,o=new m.m({canvas:t,antialias:!0,alpha:!0}),s=window.devicePixelRatio?window.devicePixelRatio:1;return o.setPixelRatio(s),o.setSize(n,a),o.gammaInput=!0,o.gammaOutput=!0,o}(s),D=function(t){var e=t.width,n=t.height,a=new m.i(e/-2,e/2,n/-2,n/2,1,1e3);return a.position.set(0,0,-10),a.lookAt(o),a}(s),L=function(){var t=new w.a({autoPlace:!1});document.getElementById("datGuiAnchor").appendChild(t.domElement),t.domElement.id="datGuiAnchor",t.add(I,"changeStep").name("Step Forward"),t.add(I,"size").name("Size").min(10).max(100).step(1).onChange(function(t){P=t,function(){for(var t=0;t<n.dataPoints.length;t++)n.dataPoints[t].adjustScale(P),n.dataPoints[t].changeTextSize(P);for(var e=0;e<n.arrows.length;e++)n.arrows[e].adjustScale(P)}()}),t.add(I,"stepDelay").name("Delay (in ms)").min(0).max(500).step(10).onChange(function(t){n.stepDelay=t}),t.add(I,"valueMax").name("Max Value").onChange(function(t){n.valueMax=t,p=n.valueMax/2}),t.add(I,"fluxMax").name("Max Flux").onChange(function(t){n.fluxMax=t,f=n.fluxMax/2}),t.addColor(I,"color").onChange(function(t){!function(t){n.color=t;for(var e=0;e<n.dataPoints.length;e++)n.dataPoints[e].changeColor(t)}(y=t)});var e=t.addFolder("Edit");return e.add(I,"editMode").name("Edit Mode").onChange(function(t){u=t}),e.add(I,"labelMode").name("Import Labels").onChange(function(t){n.labelMode=t}),e.add(I,"addPoint").name("Add Data Point"),e.add(I,"addArrow").name("Add Arrow"),e.add(I,"deletePoint").name("Delete Data Point"),t.addFolder("Adjust Increment").add(I,"skipSteps").name("Skip Steps").onChange(function(t){n.skipSteps=t}),t}();function T(t){d=t,F()}function F(){!function(){var t=[];M.traverse(function(e){(e instanceof m.g||e instanceof m.a)&&t.push(e)});for(var e=0;e<t.length;e++)M.remove(t[e])}(),function(){var t=[];n.dataPoints.forEach(function(e){var a=function(t){var e=n.labels,a=new v(t);M.add(a.object.mesh),M.add(a.shadow.mesh);var o=t.textMesh?t.textMesh.geometries[0].text:" ";o||(o=" ");return a.appendText(d,o,a.position.x,a.position.y),M.add(a.textMesh),e.push(o),a}(e);t.push(a),a.moveText(a.object.mesh.position.x,a.object.mesh.position.y)}),n.dataPoints=t}(),function(){var t=[];n.arrows.forEach(function(e){t.push(function(t){var e=new x(t.arrowInfo);return M.add(e.object),e}(e))}),n.arrows=t}(),function(){var e={x:t.width/5,y:t.height/4*2.75},n={x:(e=R(e)).x,y:e.y+50};(h=new g(M,d,{startPos:e,stopPos:n})).appendText("0"),h.addStart(),h.addStop()}(),n.skipSteps=n.skipSteps||1,n.stepDelay=n.stepDelay||300,n.valueMax=n.valueMax||1,n.fluxMax=n.fluxMax||1,n.color=n.color||[70,156,150,1],p=n.valueMax/2,f=n.fluxMax/2,I.skipSteps=n.skipSteps,I.valueMax=n.valueMax,I.fluxMax=n.fluxMax,I.stepDelay=n.stepDelay,I.color=n.color,L.updateDisplay()}function N(t,e){var a=R(A(t,e));if(u)for(var o=0;o<n.dataPoints.length;o++){var s=n.dataPoints[o].withinCircle(a.x,a.y);if(s&&1===C)O[0]=o;else if(s&&2===C)O[1]=o;else if(s){k=o,S=o;break}}if(-1===k&&h){if(S=-1,n.animationData&&!z())return void alert("Please import data first");if(h.withinBar(a.x,a.y)&&n.animationData){var r=h.getStep(a.x),c=n.animationData[r-1];h.updateProgress(r,c?c[0]:"0"),n.step=r-1,_()}else h.withinStop(a.x,a.y)?i=!0:h.withinStart(a.x,a.y)&&(i=!1,B())}}function A(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function R(e){var n=t.getBoundingClientRect();return{x:n.width/2-e.x,y:e.y-n.height/2}}function z(){return n&&!n.dataLoaded()&&alert("Please import data first"),n.dataLoaded()}function U(){return(U=Object(l.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:z()&&(i=!1,B());case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function B(){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.hasNextStep()){t.next=7;break}if(i){t.next=7;break}return _(),n.step+=r,t.next=6,a.sleep(n.stepDelay);case 6:B();case 7:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function _(){var t=n.step<0?"0":n.animationData[n.step][0];n.step>=0&&function(){for(var t,e,a=0;a<n.dataPoints.length;a++)n.animationData[n.step][a+1]>p?(e=n.animationData[n.step][a+1]-p,t=e/p,n.dataPoints[a].darkenColor(50*t)):(e=p-n.animationData[n.step][a+1],t=e/p,n.dataPoints[a].lightenColor(50*t));if(null!=n.fluxData)for(var o=0;o<n.arrows.length;o++)n.fluxData[n.step][o+1]>f?(e=n.fluxData[n.step][o+1]-f,t=e/f,M.remove(n.arrows[o].object),n.arrows[o].darkenColor(50*t),M.add(n.arrows[o].object)):(e=f-n.fluxData[n.step][o+1],t=e/f,M.remove(n.arrows[o].object),n.arrows[o].lightenColor(50*t),M.add(n.arrows[o].object))}(),h.updateProgress(n.step+1,t)}function V(t){for(var e=n.arrows,a=0;a<e.length;a++){var o=e[a].arrowInfo.pointIndex1,s=e[a].arrowInfo.pointIndex2;o===t||s===t?(M.remove(e[a].object),e.splice(a,1),a--):(o>t&&-1!==t&&(o--,e[a].arrowInfo.pointIndex1--),s>t&&-1!==t&&(s--,e[a].arrowInfo.pointIndex2--),e[a].updatePos(n.dataPoints[o].position,n.dataPoints[s].position))}}return e.resetDataAnimation=function(){n.animationData&&(n.step=0,i=!0,h.updateProgress(0,n.animationData[0][0]),_())},n.onFluxLoad=function(){},n.onLoad=function(){null!=n.animationData&&(h.appendText(n.animationData[0][0]),h.setSteps(n.animationData.length))},n.registerCallback(F),{update:function(){E.render(M,D)}}},P=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).IController=n.props.IController,n.dataContext=n.props.dataContext,n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){!function(t,e,n){var a=function(t,e){var n=t.createElement("canvas");return n.width=e.scrollWidth,n.height=e.scrollHeight,e.appendChild(n),n}(document,t),o=new y(a,n,e);!function t(){requestAnimationFrame(t),o.update()}()}(this.threeRootElement,this.dataContext,this.IController)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{title:"THREE",style:{width:"100%",height:"100%",borderStyle:"solid",borderWidth:"3px",borderColor:"gray"},ref:function(e){return t.threeRootElement=e}}," ")}}]),e}(a.Component),j=n(3),k=n(50),S=n.n(k),C=n(32),O=n.n(C),I=n(100),M=n.n(I),E=n(101),D=n.n(E),L=n(102),T=n.n(L),F=n(103),N=n.n(F),A=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"processXLSXIntoCSV",value:function(t,e){var n=this,a=new FileReader;a.readAsBinaryString(t),a.onload=function(){var t=n.transformXLXSIntoCsvStrings(a.result);e(n.parseSingleCSV(t[0]))}}},{key:"processPlotsData",value:function(t,e){var n=new FileReader;n.readAsText(t),n.onload=function(){var t=n.result;e(JSON.parse(t))}}},{key:"transformXLXSIntoCsvStrings",value:function(t){var e=n(193),a=[],o=e.read(t,{type:"binary"});return o.SheetNames.forEach(function(t){a.push(e.utils.sheet_to_csv(o.Sheets[t]))}),a}},{key:"parseSingleCSV",value:function(t){var e,n,a=0,o=1;for(n=0;n<t.length;n++)"\n"===(e=t.charAt(n))&&a++;for(e="",n=0;"\n"!==e;)","===(e=t.charAt(n))&&o++,n++;for(this.data=new Array(a),n=0;n<a;n++)this.data[n]=new Array(o);for(n=0;n<this.data.length;n++){var s=t.split("\n");this.data[n]=s[n].split(",")}for(n=1;n<this.data.length;n++)"t"!==this.data[n][0]&&"-"!==this.data[n][1]||this.data.splice(n,1);return this.data}}]),t}(),R=n(104),z=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).title=n.props.title||"Upload file",n.processUpload=n.processUpload.bind(Object(j.a)(Object(j.a)(n))),n.state={callback:n.props.onDone,accept:n.props.accept,plot:n.props.isPlot},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"hasNoFiles",value:function(t){return 0===t.length}},{key:"processUpload",value:function(t){this.state.plot?this.readPlots(t.target.files,this.state.callback):this.readXLSX(t.target.files,this.state.callback)}},{key:"readPlots",value:function(t,e){var n=e,a=new A;0!==t.length&&a.processPlotsData(t[0],function(t){n(t)})}},{key:"readXLSX",value:function(t,e){var n=e,a=new A;this.hasNoFiles(t)||a.processXLSXIntoCSV(t[0],function(t){n(t)})}},{key:"render",value:function(){var t=this;return o.a.createElement(D.a,null,o.a.createElement(N.a,{htmlFor:this.title,style:{cursor:"pointer"}},this.title,o.a.createElement(T.a,{id:this.title,type:"file",accept:this.accept,onChange:this.processUpload,ref:function(e){t.fileInput=e},style:{display:"none"}})))}}]),e}(n.n(R).a),U=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untracked";Object(h.a)(this,t),this.id=e,this.dataPoints=[],this.labels=[],this.arrows=[],this.step=0,this.fluxMax=1,this.valueMax=1,this.stepDelay=300,this.color=[70,156,150,1],this.skipSteps=1},B=n(69),X=n.n(B),_=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"addNewModelToLocal",value:function(){var t=Object(l.a)(c.a.mark(function t(e){var n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.newModelTemplate(e),t.next=3,this.loadModelsFromDefaultContainer();case 3:return(a=t.sent).push(n),t.next=7,this.saveToStore("plots",a,"Failed to add a new model").catch(function(){return n});case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"saveToStore",value:function(){var t=Object(l.a)(c.a.mark(function t(e,n){var a,o=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:"Failed to write to storage",t.prev=1,t.next=4,X.a.setItem(e,"!"+JSON.stringify(n));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),alert(a+String(t.t0));case 9:case"end":return t.stop()}},t,this,[[1,6]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"fetchFromStore",value:function(){var t=Object(l.a)(c.a.mark(function t(e){var n,a,o=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"Failed to fetch from storage",t.prev=1,t.next=4,X.a.getItem(e);case 4:if(a=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",JSON.parse(a.substring(1)));case 10:t.prev=10,t.t0=t.catch(1),alert(n+": "+String(t.t0));case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"updateStorage",value:function(){var t=Object(l.a)(c.a.mark(function t(e,n){var a,o,s,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadModelsFromDefaultContainer();case 2:for(o in a=t.sent)a.hasOwnProperty(o)&&a[o].name===e&&(s=a[o],i=s.versions.length+1,n.id=e+i,s.versions=[this.newModelVersion(n)]);this.saveToStore("plots",a,"Failed to save the models");case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeFromStorage",value:function(){var t=Object(l.a)(c.a.mark(function t(e){var n,a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadModelsFromDefaultContainer();case 2:for(o in n=t.sent,a=[],n)n.hasOwnProperty(o)&&n[o].name!==e&&a.push(n[o]);this.saveToStore("plots",a,"Failed to save the models");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"loadFromStorage",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadModelsFromDefaultContainer();case 2:return 0===(e=t.sent).length&&(e.push(this.newModelTemplate()),this.saveToStore("plots",e,"Failed to save the models")),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"loadModelsFromDefaultContainer",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchFromStore("plots","Failed to Access Memory").catch();case 2:return(e=t.sent)&&e.length||(e=[]),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"writeToLocalStorage",value:function(){var t=Object(l.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e&&e.length||(e=[]),t.next=3,this.saveToStore("plots",e);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"newModelTemplate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default Storage";return{name:t,versions:[this.newModelVersion(new U(t+".1"))]}}},{key:"newModelVersion",value:function(t){return{plot:t}}}]),t}(),V=(n(201),n(203),n(15)),W=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).IController=n.props.IController,n.dataContext=n.props.dataContext,n.uploadPoints=n.uploadDataPoints.bind(Object(j.a)(Object(j.a)(n))),n.uploadFlux=n.uploadFluxData.bind(Object(j.a)(Object(j.a)(n))),n.reset=n.reset.bind(Object(j.a)(Object(j.a)(n))),n.processUpload=n.processUpload.bind(Object(j.a)(Object(j.a)(n))),n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"downloadLocalStorage",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e,n,a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(V.toast)("Prepping Download",{position:V.toast.POSITION.TOP_LEFT}),t.t0=JSON,t.next=4,(new _).loadModelsFromDefaultContainer();case 4:t.t1=t.sent,e=t.t0.stringify.call(t.t0,t.t1),n=new Blob([e],{type:"text/plain"}),a=window.URL.createObjectURL(n),(o=document.createElement("a")).setAttribute("href",a),o.setAttribute("download","plots.json"),document.body.appendChild(o),o.click(),o.remove();case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"processUpload",value:function(t){this.readPlots(t.target.files)}},{key:"reset",value:function(t){t.preventDefault(),Object(V.toast)("Resetting Animation",{position:V.toast.POSITION.TOP_LEFT}),this.IController.resetDataAnimation()}},{key:"uploadDataPoints",value:function(t){Object(V.toast)("Upload Point Data Complete",{position:V.toast.POSITION.TOP_LEFT}),this.dataContext.injectDataPointList(t)}},{key:"uploadFluxData",value:function(t){Object(V.toast)("Upload Flux Data Complete",{position:V.toast.POSITION.TOP_LEFT}),this.dataContext.injectFluxList(t)}},{key:"uploadModels",value:function(){var t=Object(l.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!window.confirm("Warning! This will replace all of your models with the uploaded models. Continue?")){t.next=5;break}return t.next=3,(new _).writeToLocalStorage(e);case 3:return window.location.reload(),t.abrupt("return");case 5:Object(V.toast)("No Models Uploaded",{position:V.toast.POSITION.TOP_LEFT});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=function(t){t.preventDefault()},e={margin:10};return o.a.createElement(S.a,{inverse:!0,id:"nomargin"},o.a.createElement(S.a.Header,null,o.a.createElement(S.a.Brand,null,o.a.createElement("a",{href:"/"},"Compartmental Visualizer"))),o.a.createElement(M.a,{inline:!0},o.a.createElement(z,{style:e,onDone:this.uploadPoints,isPlot:!1,accept:".xlsx",onClick:t,title:"Upload Point Data"}),o.a.createElement(z,{style:e,onDone:this.uploadFlux,isPlot:!1,accept:".xlsx",onClick:t,title:"Upload Flux Data"}),o.a.createElement(O.a,{id:"reset",onClick:this.reset},"Reset",o.a.createElement(V.ToastContainer,{autoClose:1500})),o.a.createElement(O.a,{id:"export",onClick:this.downloadLocalStorage},"Export Models",o.a.createElement(V.ToastContainer,{autoClose:1500})),o.a.createElement(z,{onDone:this.uploadModels,isPlot:!0,accept:".json",onClick:t,title:"Upload Compartment Models"})))}}]),e}(a.Component),G=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).dataCapsule=n.props.dataCapsule,n.name=n.dataCapsule.name,n.className=n.props.className,n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:this.className},this.name)}}]),e}(a.Component),J=(n(212),function(t){function e(t){var n;Object(h.a)(this,e),n=Object(d.a)(this,Object(p.a)(e).call(this,t));var a=Object(j.a)(Object(j.a)(n));return n.entries=[],n.handleClick=n.handleClick.bind(Object(j.a)(Object(j.a)(n))),n.addToLocal=n.addToLocal.bind(Object(j.a)(Object(j.a)(n))),n.removeFromLocal=n.removeFromLocal.bind(Object(j.a)(Object(j.a)(n))),n.loadSaves=n.loadSaves.bind(Object(j.a)(Object(j.a)(n))),n.createButtonEntry=n.createButtonEntry.bind(Object(j.a)(Object(j.a)(n))),n.createEntryName=n.createEntryName.bind(Object(j.a)(Object(j.a)(n))),n.createGrid=n.createGrid.bind(Object(j.a)(Object(j.a)(n))),n.state={dataContext:a.props.dataContext},n.loadSaves(),n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"isActive",value:function(t){return this.state.dataContext.currentPlot().id===t.versions[t.versions.length-1].plot.id}},{key:"applyName",value:function(t){return this.isActive(t)?"Save":"Load"}},{key:"createButtonEntry",value:function(t){var e=this;return o.a.createElement(O.a,{key:this.entries.length,className:"grid-item",onClick:function(){return e.handleClick(t)}},this.applyName(t))}},{key:"createEntryName",value:function(t){return o.a.createElement(G,{key:this.entries.length,className:"grid-item",dataCapsule:t})}},{key:"addToLocal",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.solictStorageName("you would like to add."))){t.next=7;break}return t.next=4,(new _).addNewModelToLocal(e);case 4:return t.next=6,this.loadSaves();case 6:this.forceUpdate();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"removeFromLocal",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.solictStorageName("you would like to permanently delete."))){t.next=5;break}return t.next=4,(new _).removeFromStorage(e);case 4:this.forceUpdate();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"solictStorageName",value:function(t){return window.prompt("Please enter the name of Model "+t)}},{key:"handleClick",value:function(){var t=Object(l.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isActive(e)){t.next=7;break}return n=this.state.dataContext.currentPlot(),t.next=4,(new _).updateStorage(e.name,n);case 4:V.toast.success("Model Saved"),t.next=11;break;case 7:return t.next=9,this.loadSaves();case 9:this.state.dataContext.currentPlot(e),this.forceUpdate();case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"loadSaves",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.entries=[],t.next=3,(new _).loadFromStorage(this.ThreeController);case 3:e=t.sent,n=this.state.dataContext,this.setState({dataContext:n,models:e});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"createGrid",value:function(){var t=this;this.state.models&&(this.entries=[],this.state.models.forEach(function(e){t.entries.push(t.createEntryName(e)),t.entries.push(t.createButtonEntry(e))}))}},{key:"render",value:function(){return this.createGrid(),o.a.createElement("div",null,o.a.createElement("div",{className:"grid-container"},this.entries),o.a.createElement("div",{className:"grid-container"},o.a.createElement(O.a,{id:"new-plot",onClick:this.addToLocal},"New Plot"),o.a.createElement(O.a,{id:"delete-plot",onClick:this.removeFromLocal},"Delete Plot")))}}]),e}(a.Component)),H=n(68),q=n.n(H),Q=n(39),Y=n.n(Q),$=n(70),K=n.n($),Z=function(t){var e={};return e.plot_id=t.id,e.callbacks=[],e.labelMode=!1,e.onLoad=null,e.animationData=null,e.fluxData=null,Object.assign(e,t),e.callObservers=function(){e.callbacks.forEach(function(t){t()})},e.registerCallback=function(t){e.callbacks.push(t)},e.currentPlot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?e.loadPlot(t.versions[t.versions.length-1].plot):{id:e.plot_id,dataPoints:e.dataPoints,labels:e.labels,arrows:e.arrows,step:e.step,valueMax:e.valueMax,fluxMax:e.fluxMax,stepDelay:e.stepDelay,color:e.color,skipSteps:e.skipSteps}},e.loadPlot=function(t){return Object.assign(e,t),e.plot_id=t.id,e.callObservers(),t},e.injectDataPointList=function(t){return n=t,(a=e).labels=n[0],n.splice(0,1),a.animationData=n,void(a.onLoad&&"function"===typeof a.onLoad&&a.onLoad());var n,a},e.injectFluxList=function(t){return a=e,(n=t).splice(0,1),a.fluxData=n,void(a.onLoad&&"function"===typeof a.onLoad&&a.onLoad());var n,a},e.dataLoaded=function(){return null!=e.animationData},e.hasNextStep=function(){return e.dataLoaded()&&e.step<e.animationData.length},e},tt=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).ThreeController={resetDataAnimation:function(){},onLoad:function(){},onFluxLoad:function(){}},n.fetchSaves(),n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"fetchSaves",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e,n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new _).loadFromStorage(this.ThreeController);case 2:e=t.sent,console.log(e),n=e[0].versions[e[0].versions.length-1].plot,a=new Z(n),this.setState({saves:e,currentPlot:n,currentContext:a});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t={height:"100%"};return this.state&&this.state.currentContext?o.a.createElement("div",{className:"App",style:t},o.a.createElement(q.a,{fluid:!0,style:t},o.a.createElement(Y.a,null,o.a.createElement(W,{dataContext:this.state.currentContext,IController:this.ThreeController})),o.a.createElement(Y.a,{style:t},o.a.createElement(K.a,{sm:10,md:10,style:{padding:0,height:"100%"}},o.a.createElement(P,{dataContext:this.state.currentContext,IController:this.ThreeController})),o.a.createElement(K.a,{sm:2,md:2},o.a.createElement(Y.a,{sm:2,md:2},o.a.createElement("div",{style:{backgroundColor:"grey",height:"100%"},id:"datGuiAnchor"})),o.a.createElement(Y.a,{sm:2,md:2},o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement(Y.a,{sm:2,md:2},o.a.createElement(J,{dataContext:this.state.currentContext,saves:this.saves})))))):o.a.createElement("div",null,"Loading From Storage")}}]),e}(a.Component),et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}i.a.render(o.a.createElement(tt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/time_machine",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/time_machine","/service-worker.js");et?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):nt(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):nt(t)})}}()},93:function(t,e){}},[[105,2,1]]]);
//# sourceMappingURL=main.23913833.chunk.js.map